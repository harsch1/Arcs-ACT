import{f as E,d as k,g as y,o,h as C,m as T,u as a,j,b1 as W,B as Z,w as $,i as D,b2 as q,_ as N,n as K,l as U,b3 as J,e as w,b4 as Q,b5 as X,aw as Y,as as F,b6 as ee,aa as x,$ as te,c as r,a_ as G,a as h,t as S,aV as L,F as _,T as H,aT as v,aS as R,aG as se,aj as oe,r as M}from"./index-BAvZGyJa.js";import{O as ae,r as ie,s as ne,t as re}from"./SystemDialog.vue_vue_type_script_setup_true_lang-JxZf1buh.js";/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=E("RedoIcon",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=E("SparklesIcon",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),De=k({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(g){const c=g,e=y(()=>{const{class:f,...s}=c;return s});return(f,s)=>(o(),C(a(W),T(e.value,{class:a(j)("-mx-1 my-1 h-px bg-muted",c.class)}),null,16,["class"]))}}),Ie=k({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(g){const c=g,e=y(()=>{const{class:s,...p}=c;return p}),f=Z(e);return(s,p)=>(o(),C(a(q),T(a(f),{class:a(j)("px-2 py-1.5 text-sm font-semibold",s.inset&&"pl-8",c.class)}),{default:$(()=>[D(s.$slots,"default")]),_:3},16,["class"]))}}),ce="/Arcs-CAT/images/board-flagship.jpg",de=k({__name:"Popover",props:{defaultOpen:{type:Boolean},open:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(g,{emit:c}){const s=N(g,c);return(p,m)=>(o(),C(a(J),K(U(a(s))),{default:$(()=>[D(p.$slots,"default")]),_:3},16))}}),ue=k({inheritAttrs:!1,__name:"PopoverContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{default:4},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(g,{emit:c}){const e=g,f=c,s=y(()=>{const{class:m,...n}=e;return n}),p=N(s,f);return(m,n)=>(o(),C(a(X),null,{default:$(()=>[w(a(Q),T({...a(p),...m.$attrs},{class:a(j)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:$(()=>[D(m.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ge=k({__name:"PlayerFlagshipPreview",props:{piece:{},pieceId:{}},emits:["close"],setup(g,{emit:c}){const e=g,f=c,s=Y(),p=y(()=>s.players.find(d=>d.color===e.piece.color)),m=y(()=>({position:"absolute",top:"224px",left:`${e.piece.position.x+112}px`}));function n(d){var l,t;if(!((l=p.value)!=null&&l.color))return;const i={...d,color:(t=p.value)==null?void 0:t.color};s.updatePlayer(i)}return(d,i)=>(o(),C(a(de),{open:!0},{default:$(()=>[w(a(ee),{style:F(m.value)},null,8,["style"]),w(a(ue),{class:"w-[484px] p-1"},{default:$(()=>[w(a(ae),{onTrigger:i[1]||(i[1]=l=>f("close"))},{default:$(()=>[p.value?(o(),C(ze,{key:0,player:p.value,onUpdate:i[0]||(i[0]=l=>n({flagshipState:l}))},null,8,["player"])):x("",!0)]),_:1})]),_:1})]),_:1}))}}),fe=["id"],me=["src","width","draggable"],ye=["data-src"],he={x:"50%",y:"50%",textLength:"200",lengthAdjust:"spacingAndGlyphs","dominant-baseline":"middle","text-anchor":"middle"},Ce={key:2,class:"absolute flex items-center pointer-events-none right-10 -bottom-6"},_e={class:"grid grid-flow-col px-4 py-2 bg-black shrink-0 rounded-xl"},ve={class:"mr-2 text-5xl"},xe={key:0,class:"h-[3rem]",src:ie,alt:"Arrow"},$e={key:1,class:"h-[3rem]",src:ne,alt:"Hex"},ke={key:2,class:"h-[3rem]",src:re,alt:"Moon"},we={key:3,class:"mr-2 text-5xl"},be={key:0,class:"flex items-center px-4 py-2 ml-2 bg-black pointer-events-none rounded-xl"},Be={class:"mr-2 text-5xl"},Pe={key:1,class:"flex items-center px-4 py-2 ml-2 bg-black pointer-events-none rounded-xl"},Ae={class:"mr-2 text-5xl"},Se=k({__name:"GamePiece",props:{pieceConfig:{},scale:{},systemPosition:{},translate:{type:Boolean},openPreview:{type:Boolean}},emits:["previewClose"],setup(g,{emit:c}){const e=g,f=c,s=y(()=>e.pieceConfig.color?`${e.pieceConfig.type}-${e.pieceConfig.color}-${e.pieceConfig.system}`:`${e.pieceConfig.type}-${e.pieceConfig.system}`),p=y(()=>{var t,u,b,B,P,A,O,I;return"group"in e.pieceConfig?Object.values(H).includes(e.pieceConfig.type)?`./images/tokens/${(t=e.pieceConfig.type)==null?void 0:t.toLowerCase()}.png`:`./images/${(u=e.pieceConfig.color)==null?void 0:u.toLowerCase()}_${(b=e.pieceConfig.type)==null?void 0:b.toLowerCase()}.png`:Object.values(H).includes(e.pieceConfig.type)?`./images/tokens/${(B=e.pieceConfig.type)==null?void 0:B.toLowerCase()}${e.pieceConfig.isFresh?"":"_flip"}.png`:L(e.pieceConfig.type)?`./images/${(P=e.pieceConfig.color)==null?void 0:P.toLowerCase()}_${(A=e.pieceConfig.type)==null?void 0:A.toLowerCase()}.png`:`./images/${(O=e.pieceConfig.color)==null?void 0:O.toLowerCase()}_${(I=e.pieceConfig.type)==null?void 0:I.toLowerCase()}${e.pieceConfig.isFresh?"":"_flip"}.png`}),m=y(()=>{const t={x:e.pieceConfig.position.x,y:e.pieceConfig.position.y};let u=`translate(${t.x}px, ${t.y}px) scale(${e.scale??.4})`;return Object.values(v).includes(e.pieceConfig.type)||(u="translate(-50%, -50%) "+u),e.pieceConfig.type===R.ship&&"isFresh"in e.pieceConfig&&!e.pieceConfig.isFresh&&(u=`${u} translate(100%, 100%) rotate(180deg)`),u}),n=y(()=>({left:0,top:0,zIndex:e.pieceConfig.type===R.ship?1:"auto",transform:m.value})),d=y(()=>{if(e.pieceConfig.color===se.free)return 300;if(L(e.pieceConfig.type))return 332}),i=te(!1);function l(){i.value=!0}return(t,u)=>{var b,B,P,A;return o(),r("div",{id:s.value,class:"absolute",style:F(n.value)},[i.value?(o(),r("svg",{key:1,class:"absolute fallback",width:"250",height:"250","data-src":p.value},[h("text",he,S(t.pieceConfig.type),1)],8,ye)):(o(),r("img",{key:0,src:p.value,width:d.value,draggable:!a(G)(t.pieceConfig.type)||!t.pieceConfig.slot,onError:l},null,40,me)),a(G)(t.pieceConfig.type)?x("",!0):(o(),r("div",Ce,[h("div",_e,[h("span",ve,S((b=t.pieceConfig.system)==null?void 0:b.charAt(0)),1),((B=t.pieceConfig.system)==null?void 0:B.charAt(1))==="A"?(o(),r("img",xe)):((P=t.pieceConfig.system)==null?void 0:P.charAt(1))==="H"?(o(),r("img",$e)):((A=t.pieceConfig.system)==null?void 0:A.charAt(1))==="C"?(o(),r("img",ke)):(o(),r("span",we," G "))]),"group"in t.pieceConfig&&!a(L)(t.pieceConfig.type)?(o(),r(_,{key:0},[t.pieceConfig.group.damaged.length>0?(o(),r("div",be,[h("span",Be,S(t.pieceConfig.group.damaged.length),1),w(a(pe),{size:40})])):x("",!0),t.pieceConfig.group.fresh.length>0?(o(),r("div",Pe,[h("span",Ae,S(t.pieceConfig.group.fresh.length),1),w(a(le),{size:40})])):x("",!0)],64)):x("",!0)])),a(L)(t.pieceConfig.type)&&t.openPreview?(o(),C(ge,{key:3,piece:t.pieceConfig,"piece-id":s.value,onClose:u[0]||(u[0]=O=>f("previewClose"))},null,8,["piece","piece-id"])):x("",!0)],12,fe)}}}),z={slipstreamDrive:{upgrade:{x:-80,y:25},armor:{x:-79,y:-86}},tractorBeam:{upgrade:{x:51,y:25},armor:{x:51,y:-86}},controlArray:{upgrade:{x:182,y:25},armor:{x:182,y:-86}},defenseArray:{upgrade:{x:483,y:25},armor:{x:483,y:-86}},shipCrane:{upgrade:{x:614,y:25},armor:{x:614,y:-86}},hull:{upgrade:{x:745,y:25},armor:{x:745,y:-86}}},V="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='300'%20height='300'%20viewBox='0%200%20300%20300'%3e%3cpath%20fill='transparent'%20d='M%20147.00,10.44%20C%20166.49,8.37%20174.03,22.50%20182.28,37.00%20182.28,37.00%20193.80,57.00%20193.80,57.00%20193.80,57.00%20221.42,105.00%20221.42,105.00%20221.42,105.00%20271.72,192.00%20271.72,192.00%20271.72,192.00%20289.01,222.00%20289.01,222.00%20294.34,231.08%20299.41,237.99%20298.96,249.00%20298.27,265.99%20285.22,275.97%20269.00,275.92%20269.00,275.92%2062.00,275.92%2062.00,275.92%2062.00,275.92%2040.00,275.92%2040.00,275.92%2040.00,275.92%2024.00,275.92%2024.00,275.92%2013.52,273.91%205.34,266.00%202.22,256.00%201.18,252.68%200.90,249.46%201.04,246.00%201.40,236.97%206.55,229.55%2010.99,222.00%2010.99,222.00%2030.00,189.00%2030.00,189.00%2030.00,189.00%20103.85,61.00%20103.85,61.00%20103.85,61.00%20120.01,33.00%20120.01,33.00%20123.04,27.84%20126.56,21.21%20131.04,17.33%20136.12,12.93%20140.61,11.63%20147.00,10.44%20Z'%20/%3e%3c/svg%3e",Le={class:"relative w-full overflow-auto flagship-wrapper"},Fe=h("div",{class:"w-[967px]"},[h("img",{src:ce})],-1),Oe=["src","onClick"],Me=["src","onClick"],ze=k({__name:"PlayerFlagship",props:{player:{},offset:{default:()=>({x:0,y:0})}},emits:["update"],setup(g,{emit:c}){const e=g,f=c;let s={};const p={position:"absolute",scale:.35};function m(n,d){s[d]??(s[d]={});const i=s[d][n];i===void 0?s[d][n]=[v.city,!0]:i[0]===v.city?s[d][n]=i[1]===!0?[v.city,!1]:[v.starport,!0]:i[0]===v.starport&&(s[d][n]=i[1]===!0?[v.starport,!1]:void 0),f("update",s)}return oe(()=>e.player.flagshipState,n=>{s={...n??{}}},{immediate:!0}),(n,d)=>(o(),r("div",Le,[Fe,(o(!0),r(_,null,M(n.player.flagshipState,(i,l)=>(o(),r(_,{key:l},[(o(!0),r(_,null,M(i,(t,u)=>(o(),r(_,{key:`${l}-${u}`},[t?(o(),C(Se,{key:0,scale:.35,"piece-config":{type:t[0],isFresh:t[1],color:n.player.color,position:{x:a(z)[l][u].x+n.offset.x,y:a(z)[l][u].y+n.offset.y}}},null,8,["piece-config"])):x("",!0)],64))),128))],64))),128)),(o(!0),r(_,null,M(a(z),(i,l)=>(o(),r(_,{key:l},[h("img",{style:F({...p,top:`${i.upgrade.y}px`,left:`${i.upgrade.x}px`}),src:a(V),onClick:t=>m("upgrade",l)},null,12,Oe),h("img",{style:F({...p,top:`${i.armor.y}px`,left:`${i.armor.x}px`}),src:a(V),onClick:t=>m("armor",l)},null,12,Me)],64))),128))]))}});export{pe as R,le as S,Ie as _,De as a,ze as b,Se as c};
