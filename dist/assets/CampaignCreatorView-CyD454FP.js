import{f as te,d as P,g as k,o as w,h as F,w as v,i as L,m as U,u as a,j as G,k as qt,I as Nt,x as le,n as de,l as ge,p as Kt,q as se,v as Xt,s as Wt,y as Jt,z as Qt,Q as Yt,A as Ze,B as Zt,C as en,D as tn,G as nn,e as m,E as on,O as ln,M as sn,W as rn,H as X,J as an,a as C,L as un,K as Ae,N as dn,P as gn,S as cn,U as fn,V as pn,X as mn,Y as vn,Z as _n,c as R,_ as O,b as M,t as $,$ as et,F as I,r as E,a0 as tt,a1 as nt,a2 as ue,a3 as ot,a4 as lt,R as st,a5 as rt,a6 as at,a7 as hn,a8 as j,a9 as z,aa as we,ab as B,ac as ce,ad as it,ae as wn,af as Sn,ag as Ie,ah as yn,ai as Cn,aj as $n,ak as Rn,al as Xe,am as Se,an as We,ao as Fn,ap as ye,aq as xn,ar as Vn,as as Pn,at as Mn,au as kn,av as In,aw as Dn,ax as bn,ay as zn,az as Y,aA as Q,aB as ut,aC as Z,aD as En,aE as Hn,aF as Gn,aG as Ln,aH as An,aI as Bn,aJ as oe}from"./index-CbcyyI3W.js";import{C as Be,_ as On}from"./GameBoardList.vue_vue_type_script_setup_true_lang-C-Ftm4zk.js";import{_ as ee,a as dt,b as gt,c as ct,d as ft,e as pt,f as mt,g as vt,h as _t,v as ht,i as Tn,j as Un,k as jn,P as qn,l as Nn,m as Kn,n as Xn,o as Wn,p as Jn}from"./SystemDialog.vue_vue_type_script_setup_true_lang-D6wzMRCx.js";import{_ as wt,a as St,b as Qn,c as Yn,d as yt,e as Ct,f as Zn}from"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang-D-_oyymu.js";import eo from"./fate-meta-S7vzARtd.js";/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=te("ArrowRightLeftIcon",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=te("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=te("DicesIcon",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=te("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=te("SquareMinusIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=te("SquarePlusIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=te("SquareXIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ro=P({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,t=k(()=>{const{class:n,...l}=o;return l});return(n,l)=>(w(),F(a(Nt),U(t.value,{class:a(G)(a(qt)(),o.class)}),{default:v(()=>[L(n.$slots,"default")]),_:3},16,["class"]))}}),Ft=P({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(e,{emit:o}){const l=le(e,o);return(s,r)=>(w(),F(a(Kt),de(ge(a(l))),{default:v(()=>[L(s.$slots,"default")]),_:3},16))}}),_e=P({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,t=k(()=>{const{class:l,...s}=o;return s}),n=se(t);return(l,s)=>(w(),F(a(Xt),U(a(n),{class:a(G)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",o.class)}),{default:v(()=>[L(l.$slots,"default")]),_:3},16,["class"]))}}),xt=P({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,t=k(()=>{const{class:n,...l}=o;return l});return(n,l)=>(w(),F(a(Wt),U(t.value,{class:a(G)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",o.class)}),{default:v(()=>[L(n.$slots,"default")]),_:3},16,["class"]))}}),he=P({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,t=k(()=>{const{class:n,...l}=o;return l});return(n,l)=>(w(),F(a(Jt),U({class:a(G)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o.class)},t.value),{default:v(()=>[L(n.$slots,"default")]),_:3},16,["class"]))}}),De=P({__name:"ToggleGroup",props:{rovingFocus:{type:Boolean},disabled:{type:Boolean},orientation:{},dir:{},loop:{type:Boolean},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{},class:{},variant:{},size:{}},emits:["update:modelValue"],setup(e,{emit:o}){const t=e,n=o;Qt("toggleGroup",{variant:t.variant,size:t.size});const l=k(()=>{const{class:r,...u}=t;return u}),s=le(l,n);return(r,u)=>(w(),F(a(Yt),U(a(s),{class:a(G)("flex items-center justify-center gap-1",t.class)}),{default:v(()=>[L(r.$slots,"default")]),_:3},16,["class"]))}}),ao=Ze("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),be=P({__name:"ToggleGroupItem",props:{value:{},defaultValue:{type:Boolean},pressed:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{},variant:{},size:{}},setup(e){const o=e,t=Zt("toggleGroup"),n=k(()=>{const{class:s,variant:r,size:u,...i}=o;return i}),l=se(n);return(s,r)=>{var u,i;return w(),F(a(en),U(a(l),{class:a(G)(a(ao)({variant:((u=a(t))==null?void 0:u.variant)||s.variant,size:((i=a(t))==null?void 0:i.size)||s.size}),o.class)}),{default:v(()=>[L(s.$slots,"default")]),_:3},16,["class"])}}}),Vt=P({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(e,{emit:o}){const l=le(e,o);return(s,r)=>(w(),F(a(tn),de(ge(a(l))),{default:v(()=>[L(s.$slots,"default")]),_:3},16))}}),Pt=P({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(e){const o=e;return(t,n)=>(w(),F(a(nn),de(ge(o)),{default:v(()=>[L(t.$slots,"default")]),_:3},16))}}),Mt=P({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,t=k(()=>{const{class:l,...s}=o;return s}),n=se(t);return(l,s)=>(w(),F(a(ln),U(a(n),{class:a(G)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o.class)}),{default:v(()=>[L(l.$slots,"default"),m(a(on),{"as-child":""},{default:v(()=>[m(a(Be),{class:"w-4 h-4 opacity-50"})]),_:1})]),_:3},16,["class"]))}}),kt=P({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(e,{emit:o}){const t=e,n=o,l=k(()=>{const{class:r,...u}=t;return u}),s=le(l,n);return(r,u)=>(w(),F(a(an),null,{default:v(()=>[m(a(sn),U({...a(s),...r.$attrs},{class:a(G)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t.class)}),{default:v(()=>[m(a(uo)),m(a(rn),{class:X(a(G)("p-1",r.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:v(()=>[L(r.$slots,"default")]),_:3},8,["class"]),m(a(go))]),_:3},16,["class"])]),_:3}))}}),io={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},It=P({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,t=k(()=>{const{class:l,...s}=o;return s}),n=se(t);return(l,s)=>(w(),F(a(gn),U(a(n),{class:a(G)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o.class)}),{default:v(()=>[C("span",io,[m(a(un),null,{default:v(()=>[m(a(Ae),{class:"h-4 w-4"})]),_:1})]),m(a(dn),null,{default:v(()=>[L(l.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),uo=P({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,t=k(()=>{const{class:l,...s}=o;return s}),n=se(t);return(l,s)=>(w(),F(a(cn),U(a(n),{class:a(G)("flex cursor-default items-center justify-center py-1",o.class)}),{default:v(()=>[L(l.$slots,"default",{},()=>[m(a(no),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),go=P({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const o=e,t=k(()=>{const{class:l,...s}=o;return s}),n=se(t);return(l,s)=>(w(),F(a(fn),U(a(n),{class:a(G)("flex cursor-default items-center justify-center py-1",o.class)}),{default:v(()=>[L(l.$slots,"default",{},()=>[m(a(Be),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),Dt=P({__name:"Checkbox",props:{defaultChecked:{type:Boolean},checked:{type:[Boolean,String]},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{},id:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(e,{emit:o}){const t=e,n=o,l=k(()=>{const{class:r,...u}=t;return u}),s=le(l,n);return(r,u)=>(w(),F(a(mn),U(a(s),{class:a(G)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t.class)}),{default:v(()=>[m(a(pn),{class:"flex h-full w-full items-center justify-center text-current"},{default:v(()=>[L(r.$slots,"default",{},()=>[m(a(Ae),{class:"h-4 w-4"})])]),_:3})]),_:3},16,["class"]))}}),co=P({__name:"Switch",props:{defaultChecked:{type:Boolean},checked:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(e,{emit:o}){const t=e,n=o,l=k(()=>{const{class:r,...u}=t;return u}),s=le(l,n);return(r,u)=>(w(),F(a(_n),U(a(s),{class:a(G)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t.class)}),{default:v(()=>[m(a(vn),{class:X(a(G)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"))},null,8,["class"])]),_:1},16,["class"]))}}),fo=P({__name:"Badge",props:{variant:{},class:{}},setup(e){const o=e;return(t,n)=>(w(),R("div",{class:X(a(G)(a(po)({variant:t.variant}),o.class))},[L(t.$slots,"default")],2))}}),po=Ze("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),mo={class:"flex flex-wrap items-center gap-2"},vo=["src","alt"],_o={class:"ml-2 mr-1"},ho=["src","alt"],wo=P({__name:"PlayerResources",props:{player:{}},emits:["update"],setup(e,{emit:o}){const t=o,n=O(!1);return(l,s)=>(w(),R("div",null,[m(a(ee),{for:"player-resources"},{default:v(()=>[M($(l.$t("player_area.resources")),1)]),_:1}),m(a(at),{open:n.value,"onUpdate:open":s[3]||(s[3]=r=>n.value=r),value:l.player.resources,multiple:"",class:"flex flex-grow"},{default:v(()=>[m(a(et),{"as-child":""},{default:v(()=>[m(a(dt),{id:"player-resources",class:"w-full gap-0 px-3","model-value":l.player.resources},{default:v(()=>[C("div",mo,[(w(!0),R(I,null,E(l.player.resources,r=>(w(),F(a(gt),{key:r,value:r},{default:v(()=>[C("img",{src:`./images/${r.toLowerCase()}.png`,alt:r,class:"h-6"},null,8,vo),C("span",_o,$(l.$t(`resources.${r}`)),1),m(a(ct))]),_:2},1032,["value"]))),128))]),m(a(tt),{onClick:s[1]||(s[1]=r=>n.value=!0),"as-child":""},{default:v(()=>[m(a(ft),{class:"w-full px-0",readonly:"",onKeydown:s[0]||(s[0]=nt(ue(()=>{},["prevent"]),["enter"]))})]),_:1})]),_:1},8,["model-value"])]),_:1}),m(a(ot),{disabled:""},{default:v(()=>[lt((w(),F(a(pt),{"avoid-collisions":"",position:"popper","collision-padding":{bottom:180},class:"w-[--radix-popper-anchor-width] rounded-md mt-2 border bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"},{default:v(()=>[m(a(mt)),m(a(vt),null,{default:v(()=>[(w(!0),R(I,null,E(a(st),r=>(w(),F(a(_t),{key:r,value:r,onSelect:s[2]||(s[2]=ue(u=>{u.detail.value&&a(rt)(u.detail.value)&&t("update",u.detail.value)},["prevent"]))},{default:v(()=>[C("img",{class:"h-6 mr-2",src:`./images/${r.toLowerCase()}.png`,alt:r},null,8,ho),M(" "+$(l.$t(`resources.${r}`)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})),[[a(ht),()=>{n.value=!1}]])]),_:1})]),_:1},8,["open","value"])]))}}),So={class:"flex flex-wrap items-center gap-2"},yo=["src","alt"],Co={class:"ml-2 mr-1"},$o=["src","alt"],Ro=P({__name:"PlayerOutrage",props:{player:{}},emits:["update"],setup(e,{emit:o}){const t=e,n=o,l=O(!1),s=k(()=>Object.values(st).filter(r=>{var u;return!((u=t.player.outrage)!=null&&u.includes(r))}));return(r,u)=>(w(),R("div",null,[m(a(ee),{for:"player-outrage"},{default:v(()=>[M($(r.$t("player_area.outrage")),1)]),_:1}),m(a(at),{open:l.value,"onUpdate:open":u[3]||(u[3]=i=>l.value=i),value:r.player.outrage,multiple:"",class:"flex flex-grow"},{default:v(()=>[m(a(et),{"as-child":""},{default:v(()=>[m(a(dt),{id:"player-outrage",class:"w-full gap-0 px-3","model-value":r.player.outrage},{default:v(()=>[C("div",So,[(w(!0),R(I,null,E(r.player.outrage,i=>(w(),F(a(gt),{key:i,value:i},{default:v(()=>[C("img",{src:`./images/${i.toLowerCase()}.png`,alt:i,class:"h-6"},null,8,yo),C("span",Co,$(r.$t(`resources.${i}`)),1),m(a(ct))]),_:2},1032,["value"]))),128))]),m(a(tt),{onClick:u[1]||(u[1]=i=>l.value=!0),"as-child":""},{default:v(()=>[m(a(ft),{class:"w-full px-0",readonly:"",onKeydown:u[0]||(u[0]=nt(ue(()=>{},["prevent"]),["enter"]))})]),_:1})]),_:1},8,["model-value"])]),_:1}),m(a(ot),{disabled:""},{default:v(()=>[lt((w(),F(a(pt),{"avoid-collisions":"",position:"popper","collision-padding":{bottom:180},class:"w-[--radix-popper-anchor-width] rounded-md mt-2 border bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"},{default:v(()=>[m(a(mt)),m(a(vt),null,{default:v(()=>[(w(!0),R(I,null,E(s.value,i=>(w(),F(a(_t),{key:i,value:i,onSelect:u[2]||(u[2]=ue(c=>{c.detail.value&&a(rt)(c.detail.value)&&n("update",c.detail.value)},["prevent"]))},{default:v(()=>[C("img",{src:`./images/${i.toLowerCase()}.png`,alt:i,class:"h-6 mr-2"},null,8,$o),M(" "+$(r.$t(`resources.${i}`)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})),[[a(ht),()=>{l.value=!1}]])]),_:1})]),_:1},8,["open","value"])]))}}),Fo={class:"flex flex-col items-center justify-center mr-4 grow-0"},xo={class:"font-serif text-xl"},Vo={class:"grow"},Po={class:"flex flex-row"},Mo={class:"mr-2 grow"},ko={class:"w-16 ml-2"},Io={class:"flex items-center mt-2"},Do=P({__name:"PlayerFateHistory",props:{player:{},act:{},unavailableFates:{}},emits:["update","add"],setup(e,{emit:o}){const t=e,n=o,l=k(()=>t.act?(t.player.fateHistory??[]).length<t.act:!0),s=k(()=>c=>Object.values(eo).filter(d=>d.act===c+1||t.player.fateHistory.find(([p,,f])=>d.id===p&&f)).map(d=>d.id)),r=k(()=>c=>t.player.fateHistory.find(([p,,f])=>c===p&&f)?!1:t.unavailableFates&&t.unavailableFates.includes(c));function u(c,d,{power:p,succeeded:f}={}){const g=[...t.player.fateHistory];n("update",c,{act:d,power:p??g[d][1],succeeded:f??g[d][2],currentFate:d+1===t.act})}function i(){n("add")}return(c,d)=>(w(),R(I,null,[C("div",de(ge(c.$attrs)),[(w(!0),R(I,null,E(c.player.fateHistory,([p,f,g],_)=>(w(),R("div",{key:p,class:"flex flex-row px-3 py-2 border rounded border-neutral-400 fate-wrapper"},[C("div",Fo,[d[0]||(d[0]=C("span",null,"Act",-1)),C("span",xo,$(a(hn)[_+1]),1)]),C("div",Vo,[C("div",Po,[C("div",Mo,[m(a(ee),{for:`player-fate-${_}`},{default:v(()=>[M($(c.$t("player_area.fate")),1)]),_:2},1032,["for"]),m(a(Vt),{id:`player-fate-${_}`,"model-value":p,"onUpdate:modelValue":h=>u(h,_)},{default:v(()=>[m(a(Mt),null,{default:v(()=>[m(a(Pt))]),_:1}),m(a(kt),{"collision-padding":{top:64,bottom:200},"avoid-collisions":""},{default:v(()=>[(w(!0),R(I,null,E(s.value(_),h=>(w(),F(a(It),{key:h,value:h,disabled:p!==h&&r.value(h)},{default:v(()=>[C("strong",null,$(h),1),M(" "+$(c.$t(`fates.${h}`)),1)]),_:2},1032,["value","disabled"]))),128))]),_:2},1024)]),_:2},1032,["id","model-value","onUpdate:modelValue"])]),C("div",ko,[m(a(ee),{for:`player-power-${_}`},{default:v(()=>[M($(c.$t("player_area.power")),1)]),_:2},1032,["for"]),m(a(jn),{id:`player-power-${_}`,"model-value":f,"onUpdate:modelValue":h=>u(p,_,{power:h})},{default:v(()=>[m(a(Tn),null,{default:v(()=>[m(a(Un))]),_:1})]),_:2},1032,["id","model-value","onUpdate:modelValue"])])]),C("div",Io,[m(a(Dt),{id:`player-fate-succeeded-${_}`,checked:g,"onUpdate:checked":h=>u(p,_,{succeeded:h})},null,8,["id","checked","onUpdate:checked"]),m(a(ee),{for:`player-fate-succeeded-${_}`,class:"ml-2"},{default:v(()=>[M($(c.$t("player_area.completed_objective")),1)]),_:2},1032,["for"])])])]))),128))],16),l.value?(w(),F(a(j),{key:0,class:"w-full my-2",onClick:i},{default:v(()=>[m(a(qn),{class:"mr-2"}),M(" "+$(c.$t("player_area.add_fate")),1)]),_:1})):z("",!0)],64))}}),bo=we(Do,[["__scopeId","data-v-a848a307"]]),zo=[{accessorKey:"id",enableColumnFilter:!1,header:()=>B("div",{class:"text-left"},ce.global.t("deck_builder.table.id")),cell:({row:e})=>B("div",{class:"flex flex-col w-[88px]"},[B("span",{},e.getValue("id")),B("span",{class:"italic text-xs"},e.getValue("set"))])},{accessorKey:"name",enableColumnFilter:!1,header:()=>B("div",{class:"text-left"},ce.global.t("deck_builder.table.name")),cell:({row:e})=>B("div",{class:"flex flex-col grow"},[B("span",{},e.getValue("name")),B("span",{class:"font-bold"},e.getValue("location"))])},{accessorKey:"set",header:()=>B("div",{class:"text-center"},ce.global.t("deck_builder.table.set")),cell:({row:e})=>B("div",{class:"text-center"},e.getValue("set")),filterFn:"arrIncludesSome"},{accessorKey:"location",accessorFn:e=>it.capitalize(e.location),header:()=>B("div",{class:"self-center"},ce.global.t("deck_builder.table.location")),cell:({row:e})=>B("div",{class:"text-center"},e.getValue("location")),filterFn:"arrIncludesSome"}];/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function W(e,o){return typeof e=="function"?e(o):e}function T(e,o){return t=>{o.setState(n=>({...n,[e]:W(t,n[e])}))}}function Ce(e){return e instanceof Function}function Eo(e){return Array.isArray(e)&&e.every(o=>typeof o=="number")}function Ho(e,o){const t=[],n=l=>{l.forEach(s=>{t.push(s);const r=o(s);r!=null&&r.length&&n(r)})};return n(e),t}function S(e,o,t){let n=[],l;return s=>{let r;t.key&&t.debug&&(r=Date.now());const u=e(s);if(!(u.length!==n.length||u.some((d,p)=>n[p]!==d)))return l;n=u;let c;if(t.key&&t.debug&&(c=Date.now()),l=o(...u),t==null||t.onChange==null||t.onChange(l),t.key&&t.debug&&t!=null&&t.debug()){const d=Math.round((Date.now()-r)*100)/100,p=Math.round((Date.now()-c)*100)/100,f=p/16,g=(_,h)=>{for(_=String(_);_.length<h;)_=" "+_;return _};console.info(`%câ± ${g(p,5)} /${g(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,t==null?void 0:t.key)}return l}}function y(e,o,t,n){return{debug:()=>{var l;return(l=e==null?void 0:e.debugAll)!=null?l:e[o]},key:!1,onChange:n}}function Go(e,o,t,n){const l=()=>{var r;return(r=s.getValue())!=null?r:e.options.renderFallbackValue},s={id:`${o.id}_${t.id}`,row:o,column:t,getValue:()=>o.getValue(n),renderValue:l,getContext:S(()=>[e,t,o,s],(r,u,i,c)=>({table:r,column:u,row:i,cell:c,getValue:c.getValue,renderValue:c.renderValue}),y(e.options,"debugCells"))};return e._features.forEach(r=>{r.createCell==null||r.createCell(s,t,o,e)},{}),s}function Lo(e,o,t,n){var l,s;const u={...e._getDefaultColumnDef(),...o},i=u.accessorKey;let c=(l=(s=u.id)!=null?s:i?typeof String.prototype.replaceAll=="function"?i.replaceAll(".","_"):i.replace(/\./g,"_"):void 0)!=null?l:typeof u.header=="string"?u.header:void 0,d;if(u.accessorFn?d=u.accessorFn:i&&(i.includes(".")?d=f=>{let g=f;for(const h of i.split(".")){var _;g=(_=g)==null?void 0:_[h]}return g}:d=f=>f[u.accessorKey]),!c)throw new Error;let p={id:`${String(c)}`,accessorFn:d,parent:n,depth:t,columnDef:u,columns:[],getFlatColumns:S(()=>[!0],()=>{var f;return[p,...(f=p.columns)==null?void 0:f.flatMap(g=>g.getFlatColumns())]},y(e.options,"debugColumns")),getLeafColumns:S(()=>[e._getOrderColumnsFn()],f=>{var g;if((g=p.columns)!=null&&g.length){let _=p.columns.flatMap(h=>h.getLeafColumns());return f(_)}return[p]},y(e.options,"debugColumns"))};for(const f of e._features)f.createColumn==null||f.createColumn(p,e);return p}const H="debugHeaders";function Je(e,o,t){var n;let s={id:(n=t.id)!=null?n:o.id,column:o,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const r=[],u=i=>{i.subHeaders&&i.subHeaders.length&&i.subHeaders.map(u),r.push(i)};return u(s),r},getContext:()=>({table:e,header:s,column:o})};return e._features.forEach(r=>{r.createHeader==null||r.createHeader(s,e)}),s}const Ao={createTable:e=>{e.getHeaderGroups=S(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n,l)=>{var s,r;const u=(s=n==null?void 0:n.map(p=>t.find(f=>f.id===p)).filter(Boolean))!=null?s:[],i=(r=l==null?void 0:l.map(p=>t.find(f=>f.id===p)).filter(Boolean))!=null?r:[],c=t.filter(p=>!(n!=null&&n.includes(p.id))&&!(l!=null&&l.includes(p.id)));return fe(o,[...u,...c,...i],e)},y(e.options,H)),e.getCenterHeaderGroups=S(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n,l)=>(t=t.filter(s=>!(n!=null&&n.includes(s.id))&&!(l!=null&&l.includes(s.id))),fe(o,t,e,"center")),y(e.options,H)),e.getLeftHeaderGroups=S(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(o,t,n)=>{var l;const s=(l=n==null?void 0:n.map(r=>t.find(u=>u.id===r)).filter(Boolean))!=null?l:[];return fe(o,s,e,"left")},y(e.options,H)),e.getRightHeaderGroups=S(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(o,t,n)=>{var l;const s=(l=n==null?void 0:n.map(r=>t.find(u=>u.id===r)).filter(Boolean))!=null?l:[];return fe(o,s,e,"right")},y(e.options,H)),e.getFooterGroups=S(()=>[e.getHeaderGroups()],o=>[...o].reverse(),y(e.options,H)),e.getLeftFooterGroups=S(()=>[e.getLeftHeaderGroups()],o=>[...o].reverse(),y(e.options,H)),e.getCenterFooterGroups=S(()=>[e.getCenterHeaderGroups()],o=>[...o].reverse(),y(e.options,H)),e.getRightFooterGroups=S(()=>[e.getRightHeaderGroups()],o=>[...o].reverse(),y(e.options,H)),e.getFlatHeaders=S(()=>[e.getHeaderGroups()],o=>o.map(t=>t.headers).flat(),y(e.options,H)),e.getLeftFlatHeaders=S(()=>[e.getLeftHeaderGroups()],o=>o.map(t=>t.headers).flat(),y(e.options,H)),e.getCenterFlatHeaders=S(()=>[e.getCenterHeaderGroups()],o=>o.map(t=>t.headers).flat(),y(e.options,H)),e.getRightFlatHeaders=S(()=>[e.getRightHeaderGroups()],o=>o.map(t=>t.headers).flat(),y(e.options,H)),e.getCenterLeafHeaders=S(()=>[e.getCenterFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),y(e.options,H)),e.getLeftLeafHeaders=S(()=>[e.getLeftFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),y(e.options,H)),e.getRightLeafHeaders=S(()=>[e.getRightFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),y(e.options,H)),e.getLeafHeaders=S(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(o,t,n)=>{var l,s,r,u,i,c;return[...(l=(s=o[0])==null?void 0:s.headers)!=null?l:[],...(r=(u=t[0])==null?void 0:u.headers)!=null?r:[],...(i=(c=n[0])==null?void 0:c.headers)!=null?i:[]].map(d=>d.getLeafHeaders()).flat()},y(e.options,H))}};function fe(e,o,t,n){var l,s;let r=0;const u=function(f,g){g===void 0&&(g=1),r=Math.max(r,g),f.filter(_=>_.getIsVisible()).forEach(_=>{var h;(h=_.columns)!=null&&h.length&&u(_.columns,g+1)},0)};u(e);let i=[];const c=(f,g)=>{const _={depth:g,id:[n,`${g}`].filter(Boolean).join("_"),headers:[]},h=[];f.forEach(x=>{const V=[...h].reverse()[0],D=x.column.depth===_.depth;let b,N=!1;if(D&&x.column.parent?b=x.column.parent:(b=x.column,N=!0),V&&(V==null?void 0:V.column)===b)V.subHeaders.push(x);else{const A=Je(t,b,{id:[n,g,b.id,x==null?void 0:x.id].filter(Boolean).join("_"),isPlaceholder:N,placeholderId:N?`${h.filter(ne=>ne.column===b).length}`:void 0,depth:g,index:h.length});A.subHeaders.push(x),h.push(A)}_.headers.push(x),x.headerGroup=_}),i.push(_),g>0&&c(h,g-1)},d=o.map((f,g)=>Je(t,f,{depth:r,index:g}));c(d,r-1),i.reverse();const p=f=>f.filter(_=>_.column.getIsVisible()).map(_=>{let h=0,x=0,V=[0];_.subHeaders&&_.subHeaders.length?(V=[],p(_.subHeaders).forEach(b=>{let{colSpan:N,rowSpan:A}=b;h+=N,V.push(A)})):h=1;const D=Math.min(...V);return x=x+D,_.colSpan=h,_.rowSpan=x,{colSpan:h,rowSpan:x}});return p((l=(s=i[0])==null?void 0:s.headers)!=null?l:[]),i}const Oe=(e,o,t,n,l,s,r)=>{let u={id:o,index:n,original:t,depth:l,parentId:r,_valuesCache:{},_uniqueValuesCache:{},getValue:i=>{if(u._valuesCache.hasOwnProperty(i))return u._valuesCache[i];const c=e.getColumn(i);if(c!=null&&c.accessorFn)return u._valuesCache[i]=c.accessorFn(u.original,n),u._valuesCache[i]},getUniqueValues:i=>{if(u._uniqueValuesCache.hasOwnProperty(i))return u._uniqueValuesCache[i];const c=e.getColumn(i);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(u._uniqueValuesCache[i]=c.columnDef.getUniqueValues(u.original,n),u._uniqueValuesCache[i]):(u._uniqueValuesCache[i]=[u.getValue(i)],u._uniqueValuesCache[i])},renderValue:i=>{var c;return(c=u.getValue(i))!=null?c:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Ho(u.subRows,i=>i.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId,!0):void 0,getParentRows:()=>{let i=[],c=u;for(;;){const d=c.getParentRow();if(!d)break;i.push(d),c=d}return i.reverse()},getAllCells:S(()=>[e.getAllLeafColumns()],i=>i.map(c=>Go(e,u,c,c.id)),y(e.options,"debugRows")),_getAllCellsByColumnId:S(()=>[u.getAllCells()],i=>i.reduce((c,d)=>(c[d.column.id]=d,c),{}),y(e.options,"debugRows"))};for(let i=0;i<e._features.length;i++){const c=e._features[i];c==null||c.createRow==null||c.createRow(u,e)}return u},Bo={createColumn:(e,o)=>{e._getFacetedRowModel=o.options.getFacetedRowModel&&o.options.getFacetedRowModel(o,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():o.getPreFilteredRowModel(),e._getFacetedUniqueValues=o.options.getFacetedUniqueValues&&o.options.getFacetedUniqueValues(o,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=o.options.getFacetedMinMaxValues&&o.options.getFacetedMinMaxValues(o,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},bt=(e,o,t)=>{var n,l;const s=t==null||(n=t.toString())==null?void 0:n.toLowerCase();return!!(!((l=e.getValue(o))==null||(l=l.toString())==null||(l=l.toLowerCase())==null)&&l.includes(s))};bt.autoRemove=e=>q(e);const zt=(e,o,t)=>{var n;return!!(!((n=e.getValue(o))==null||(n=n.toString())==null)&&n.includes(t))};zt.autoRemove=e=>q(e);const Et=(e,o,t)=>{var n;return((n=e.getValue(o))==null||(n=n.toString())==null?void 0:n.toLowerCase())===(t==null?void 0:t.toLowerCase())};Et.autoRemove=e=>q(e);const Ht=(e,o,t)=>{var n;return(n=e.getValue(o))==null?void 0:n.includes(t)};Ht.autoRemove=e=>q(e)||!(e!=null&&e.length);const Gt=(e,o,t)=>!t.some(n=>{var l;return!((l=e.getValue(o))!=null&&l.includes(n))});Gt.autoRemove=e=>q(e)||!(e!=null&&e.length);const Lt=(e,o,t)=>t.some(n=>{var l;return(l=e.getValue(o))==null?void 0:l.includes(n)});Lt.autoRemove=e=>q(e)||!(e!=null&&e.length);const At=(e,o,t)=>e.getValue(o)===t;At.autoRemove=e=>q(e);const Bt=(e,o,t)=>e.getValue(o)==t;Bt.autoRemove=e=>q(e);const Te=(e,o,t)=>{let[n,l]=t;const s=e.getValue(o);return s>=n&&s<=l};Te.resolveFilterValue=e=>{let[o,t]=e,n=typeof o!="number"?parseFloat(o):o,l=typeof t!="number"?parseFloat(t):t,s=o===null||Number.isNaN(n)?-1/0:n,r=t===null||Number.isNaN(l)?1/0:l;if(s>r){const u=s;s=r,r=u}return[s,r]};Te.autoRemove=e=>q(e)||q(e[0])&&q(e[1]);const K={includesString:bt,includesStringSensitive:zt,equalsString:Et,arrIncludes:Ht,arrIncludesAll:Gt,arrIncludesSome:Lt,equals:At,weakEquals:Bt,inNumberRange:Te};function q(e){return e==null||e===""}const Oo={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:T("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,o)=>{e.getAutoFilterFn=()=>{const t=o.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(e.id);return typeof n=="string"?K.includesString:typeof n=="number"?K.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?K.equals:Array.isArray(n)?K.arrIncludes:K.weakEquals},e.getFilterFn=()=>{var t,n;return Ce(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(t=(n=o.options.filterFns)==null?void 0:n[e.columnDef.filterFn])!=null?t:K[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,n,l;return((t=e.columnDef.enableColumnFilter)!=null?t:!0)&&((n=o.options.enableColumnFilters)!=null?n:!0)&&((l=o.options.enableFilters)!=null?l:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return(t=o.getState().columnFilters)==null||(t=t.find(n=>n.id===e.id))==null?void 0:t.value},e.getFilterIndex=()=>{var t,n;return(t=(n=o.getState().columnFilters)==null?void 0:n.findIndex(l=>l.id===e.id))!=null?t:-1},e.setFilterValue=t=>{o.setColumnFilters(n=>{const l=e.getFilterFn(),s=n==null?void 0:n.find(d=>d.id===e.id),r=W(t,s?s.value:void 0);if(Qe(l,r,e)){var u;return(u=n==null?void 0:n.filter(d=>d.id!==e.id))!=null?u:[]}const i={id:e.id,value:r};if(s){var c;return(c=n==null?void 0:n.map(d=>d.id===e.id?i:d))!=null?c:[]}return n!=null&&n.length?[...n,i]:[i]})}},createRow:(e,o)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=o=>{const t=e.getAllLeafColumns(),n=l=>{var s;return(s=W(o,l))==null?void 0:s.filter(r=>{const u=t.find(i=>i.id===r.id);if(u){const i=u.getFilterFn();if(Qe(i,r.value,u))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(n)},e.resetColumnFilters=o=>{var t,n;e.setColumnFilters(o?[]:(t=(n=e.initialState)==null?void 0:n.columnFilters)!=null?t:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Qe(e,o,t){return(e&&e.autoRemove?e.autoRemove(o,t):!1)||typeof o>"u"||typeof o=="string"&&!o}const To=(e,o,t)=>t.reduce((n,l)=>{const s=l.getValue(e);return n+(typeof s=="number"?s:0)},0),Uo=(e,o,t)=>{let n;return t.forEach(l=>{const s=l.getValue(e);s!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}),n},jo=(e,o,t)=>{let n;return t.forEach(l=>{const s=l.getValue(e);s!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}),n},qo=(e,o,t)=>{let n,l;return t.forEach(s=>{const r=s.getValue(e);r!=null&&(n===void 0?r>=r&&(n=l=r):(n>r&&(n=r),l<r&&(l=r)))}),[n,l]},No=(e,o)=>{let t=0,n=0;if(o.forEach(l=>{let s=l.getValue(e);s!=null&&(s=+s)>=s&&(++t,n+=s)}),t)return n/t},Ko=(e,o)=>{if(!o.length)return;const t=o.map(s=>s.getValue(e));if(!Eo(t))return;if(t.length===1)return t[0];const n=Math.floor(t.length/2),l=t.sort((s,r)=>s-r);return t.length%2!==0?l[n]:(l[n-1]+l[n])/2},Xo=(e,o)=>Array.from(new Set(o.map(t=>t.getValue(e))).values()),Wo=(e,o)=>new Set(o.map(t=>t.getValue(e))).size,Jo=(e,o)=>o.length,$e={sum:To,min:Uo,max:jo,extent:qo,mean:No,median:Ko,unique:Xo,uniqueCount:Wo,count:Jo},Qo={getDefaultColumnDef:()=>({aggregatedCell:e=>{var o,t;return(o=(t=e.getValue())==null||t.toString==null?void 0:t.toString())!=null?o:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:T("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,o)=>{e.toggleGrouping=()=>{o.setGrouping(t=>t!=null&&t.includes(e.id)?t.filter(n=>n!==e.id):[...t??[],e.id])},e.getCanGroup=()=>{var t,n;return((t=e.columnDef.enableGrouping)!=null?t:!0)&&((n=o.options.enableGrouping)!=null?n:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var t;return(t=o.getState().grouping)==null?void 0:t.includes(e.id)},e.getGroupedIndex=()=>{var t;return(t=o.getState().grouping)==null?void 0:t.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const t=o.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(e.id);if(typeof n=="number")return $e.sum;if(Object.prototype.toString.call(n)==="[object Date]")return $e.extent},e.getAggregationFn=()=>{var t,n;if(!e)throw new Error;return Ce(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(t=(n=o.options.aggregationFns)==null?void 0:n[e.columnDef.aggregationFn])!=null?t:$e[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=o=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(o),e.resetGrouping=o=>{var t,n;e.setGrouping(o?[]:(t=(n=e.initialState)==null?void 0:n.grouping)!=null?t:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,o)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=t=>{if(e._groupingValuesCache.hasOwnProperty(t))return e._groupingValuesCache[t];const n=o.getColumn(t);return n!=null&&n.columnDef.getGroupingValue?(e._groupingValuesCache[t]=n.columnDef.getGroupingValue(e.original),e._groupingValuesCache[t]):e.getValue(t)},e._groupingValuesCache={}},createCell:(e,o,t,n)=>{e.getIsGrouped=()=>o.getIsGrouped()&&o.id===t.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&o.getIsGrouped(),e.getIsAggregated=()=>{var l;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((l=t.subRows)!=null&&l.length)}}};function Yo(e,o,t){if(!(o!=null&&o.length)||!t)return e;const n=e.filter(s=>!o.includes(s.id));return t==="remove"?n:[...o.map(s=>e.find(r=>r.id===s)).filter(Boolean),...n]}const Zo={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:T("columnOrder",e)}),createColumn:(e,o)=>{e.getIndex=S(t=>[ie(o,t)],t=>t.findIndex(n=>n.id===e.id),y(o.options,"debugColumns")),e.getIsFirstColumn=t=>{var n;return((n=ie(o,t)[0])==null?void 0:n.id)===e.id},e.getIsLastColumn=t=>{var n;const l=ie(o,t);return((n=l[l.length-1])==null?void 0:n.id)===e.id}},createTable:e=>{e.setColumnOrder=o=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(o),e.resetColumnOrder=o=>{var t;e.setColumnOrder(o?[]:(t=e.initialState.columnOrder)!=null?t:[])},e._getOrderColumnsFn=S(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(o,t,n)=>l=>{let s=[];if(!(o!=null&&o.length))s=l;else{const r=[...o],u=[...l];for(;u.length&&r.length;){const i=r.shift(),c=u.findIndex(d=>d.id===i);c>-1&&s.push(u.splice(c,1)[0])}s=[...s,...u]}return Yo(s,t,n)},y(e.options,"debugTable"))}},Re=()=>({left:[],right:[]}),el={getInitialState:e=>({columnPinning:Re(),...e}),getDefaultOptions:e=>({onColumnPinningChange:T("columnPinning",e)}),createColumn:(e,o)=>{e.pin=t=>{const n=e.getLeafColumns().map(l=>l.id).filter(Boolean);o.setColumnPinning(l=>{var s,r;if(t==="right"){var u,i;return{left:((u=l==null?void 0:l.left)!=null?u:[]).filter(p=>!(n!=null&&n.includes(p))),right:[...((i=l==null?void 0:l.right)!=null?i:[]).filter(p=>!(n!=null&&n.includes(p))),...n]}}if(t==="left"){var c,d;return{left:[...((c=l==null?void 0:l.left)!=null?c:[]).filter(p=>!(n!=null&&n.includes(p))),...n],right:((d=l==null?void 0:l.right)!=null?d:[]).filter(p=>!(n!=null&&n.includes(p)))}}return{left:((s=l==null?void 0:l.left)!=null?s:[]).filter(p=>!(n!=null&&n.includes(p))),right:((r=l==null?void 0:l.right)!=null?r:[]).filter(p=>!(n!=null&&n.includes(p)))}})},e.getCanPin=()=>e.getLeafColumns().some(n=>{var l,s,r;return((l=n.columnDef.enablePinning)!=null?l:!0)&&((s=(r=o.options.enableColumnPinning)!=null?r:o.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const t=e.getLeafColumns().map(u=>u.id),{left:n,right:l}=o.getState().columnPinning,s=t.some(u=>n==null?void 0:n.includes(u)),r=t.some(u=>l==null?void 0:l.includes(u));return s?"left":r?"right":!1},e.getPinnedIndex=()=>{var t,n;const l=e.getIsPinned();return l?(t=(n=o.getState().columnPinning)==null||(n=n[l])==null?void 0:n.indexOf(e.id))!=null?t:-1:0}},createRow:(e,o)=>{e.getCenterVisibleCells=S(()=>[e._getAllVisibleCells(),o.getState().columnPinning.left,o.getState().columnPinning.right],(t,n,l)=>{const s=[...n??[],...l??[]];return t.filter(r=>!s.includes(r.column.id))},y(o.options,"debugRows")),e.getLeftVisibleCells=S(()=>[e._getAllVisibleCells(),o.getState().columnPinning.left],(t,n)=>(n??[]).map(s=>t.find(r=>r.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),y(o.options,"debugRows")),e.getRightVisibleCells=S(()=>[e._getAllVisibleCells(),o.getState().columnPinning.right],(t,n)=>(n??[]).map(s=>t.find(r=>r.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),y(o.options,"debugRows"))},createTable:e=>{e.setColumnPinning=o=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(o),e.resetColumnPinning=o=>{var t,n;return e.setColumnPinning(o?Re():(t=(n=e.initialState)==null?void 0:n.columnPinning)!=null?t:Re())},e.getIsSomeColumnsPinned=o=>{var t;const n=e.getState().columnPinning;if(!o){var l,s;return!!((l=n.left)!=null&&l.length||(s=n.right)!=null&&s.length)}return!!((t=n[o])!=null&&t.length)},e.getLeftLeafColumns=S(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(o,t)=>(t??[]).map(n=>o.find(l=>l.id===n)).filter(Boolean),y(e.options,"debugColumns")),e.getRightLeafColumns=S(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(o,t)=>(t??[]).map(n=>o.find(l=>l.id===n)).filter(Boolean),y(e.options,"debugColumns")),e.getCenterLeafColumns=S(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n)=>{const l=[...t??[],...n??[]];return o.filter(s=>!l.includes(s.id))},y(e.options,"debugColumns"))}},pe={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Fe=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),tl={getDefaultColumnDef:()=>pe,getInitialState:e=>({columnSizing:{},columnSizingInfo:Fe(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:T("columnSizing",e),onColumnSizingInfoChange:T("columnSizingInfo",e)}),createColumn:(e,o)=>{e.getSize=()=>{var t,n,l;const s=o.getState().columnSizing[e.id];return Math.min(Math.max((t=e.columnDef.minSize)!=null?t:pe.minSize,(n=s??e.columnDef.size)!=null?n:pe.size),(l=e.columnDef.maxSize)!=null?l:pe.maxSize)},e.getStart=S(t=>[t,ie(o,t),o.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((l,s)=>l+s.getSize(),0),y(o.options,"debugColumns")),e.getAfter=S(t=>[t,ie(o,t),o.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((l,s)=>l+s.getSize(),0),y(o.options,"debugColumns")),e.resetSize=()=>{o.setColumnSizing(t=>{let{[e.id]:n,...l}=t;return l})},e.getCanResize=()=>{var t,n;return((t=e.columnDef.enableResizing)!=null?t:!0)&&((n=o.options.enableColumnResizing)!=null?n:!0)},e.getIsResizing=()=>o.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,o)=>{e.getSize=()=>{let t=0;const n=l=>{if(l.subHeaders.length)l.subHeaders.forEach(n);else{var s;t+=(s=l.column.getSize())!=null?s:0}};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=t=>{const n=o.getColumn(e.column.id),l=n==null?void 0:n.getCanResize();return s=>{if(!n||!l||(s.persist==null||s.persist(),xe(s)&&s.touches&&s.touches.length>1))return;const r=e.getSize(),u=e?e.getLeafHeaders().map(V=>[V.column.id,V.column.getSize()]):[[n.id,n.getSize()]],i=xe(s)?Math.round(s.touches[0].clientX):s.clientX,c={},d=(V,D)=>{typeof D=="number"&&(o.setColumnSizingInfo(b=>{var N,A;const ne=o.options.columnResizeDirection==="rtl"?-1:1,qe=(D-((N=b==null?void 0:b.startOffset)!=null?N:0))*ne,Ne=Math.max(qe/((A=b==null?void 0:b.startSize)!=null?A:0),-.999999);return b.columnSizingStart.forEach(Ut=>{let[jt,Ke]=Ut;c[jt]=Math.round(Math.max(Ke+Ke*Ne,0)*100)/100}),{...b,deltaOffset:qe,deltaPercentage:Ne}}),(o.options.columnResizeMode==="onChange"||V==="end")&&o.setColumnSizing(b=>({...b,...c})))},p=V=>d("move",V),f=V=>{d("end",V),o.setColumnSizingInfo(D=>({...D,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=t||typeof document<"u"?document:null,_={moveHandler:V=>p(V.clientX),upHandler:V=>{g==null||g.removeEventListener("mousemove",_.moveHandler),g==null||g.removeEventListener("mouseup",_.upHandler),f(V.clientX)}},h={moveHandler:V=>(V.cancelable&&(V.preventDefault(),V.stopPropagation()),p(V.touches[0].clientX),!1),upHandler:V=>{var D;g==null||g.removeEventListener("touchmove",h.moveHandler),g==null||g.removeEventListener("touchend",h.upHandler),V.cancelable&&(V.preventDefault(),V.stopPropagation()),f((D=V.touches[0])==null?void 0:D.clientX)}},x=nl()?{passive:!1}:!1;xe(s)?(g==null||g.addEventListener("touchmove",h.moveHandler,x),g==null||g.addEventListener("touchend",h.upHandler,x)):(g==null||g.addEventListener("mousemove",_.moveHandler,x),g==null||g.addEventListener("mouseup",_.upHandler,x)),o.setColumnSizingInfo(V=>({...V,startOffset:i,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:u,isResizingColumn:n.id}))}}},createTable:e=>{e.setColumnSizing=o=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(o),e.setColumnSizingInfo=o=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(o),e.resetColumnSizing=o=>{var t;e.setColumnSizing(o?{}:(t=e.initialState.columnSizing)!=null?t:{})},e.resetHeaderSizeInfo=o=>{var t;e.setColumnSizingInfo(o?Fe():(t=e.initialState.columnSizingInfo)!=null?t:Fe())},e.getTotalSize=()=>{var o,t;return(o=(t=e.getHeaderGroups()[0])==null?void 0:t.headers.reduce((n,l)=>n+l.getSize(),0))!=null?o:0},e.getLeftTotalSize=()=>{var o,t;return(o=(t=e.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((n,l)=>n+l.getSize(),0))!=null?o:0},e.getCenterTotalSize=()=>{var o,t;return(o=(t=e.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((n,l)=>n+l.getSize(),0))!=null?o:0},e.getRightTotalSize=()=>{var o,t;return(o=(t=e.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((n,l)=>n+l.getSize(),0))!=null?o:0}}};let me=null;function nl(){if(typeof me=="boolean")return me;let e=!1;try{const o={get passive(){return e=!0,!1}},t=()=>{};window.addEventListener("test",t,o),window.removeEventListener("test",t)}catch{e=!1}return me=e,me}function xe(e){return e.type==="touchstart"}const ol={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:T("columnVisibility",e)}),createColumn:(e,o)=>{e.toggleVisibility=t=>{e.getCanHide()&&o.setColumnVisibility(n=>({...n,[e.id]:t??!e.getIsVisible()}))},e.getIsVisible=()=>{var t,n;const l=e.columns;return(t=l.length?l.some(s=>s.getIsVisible()):(n=o.getState().columnVisibility)==null?void 0:n[e.id])!=null?t:!0},e.getCanHide=()=>{var t,n;return((t=e.columnDef.enableHiding)!=null?t:!0)&&((n=o.options.enableHiding)!=null?n:!0)},e.getToggleVisibilityHandler=()=>t=>{e.toggleVisibility==null||e.toggleVisibility(t.target.checked)}},createRow:(e,o)=>{e._getAllVisibleCells=S(()=>[e.getAllCells(),o.getState().columnVisibility],t=>t.filter(n=>n.column.getIsVisible()),y(o.options,"debugRows")),e.getVisibleCells=S(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(t,n,l)=>[...t,...n,...l],y(o.options,"debugRows"))},createTable:e=>{const o=(t,n)=>S(()=>[n(),n().filter(l=>l.getIsVisible()).map(l=>l.id).join("_")],l=>l.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),y(e.options,"debugColumns"));e.getVisibleFlatColumns=o("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=o("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=o("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=o("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=o("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:(n=e.initialState.columnVisibility)!=null?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=(n=t)!=null?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((l,s)=>({...l,[s.id]:t||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible((n=t.target)==null?void 0:n.checked)}}};function ie(e,o){return o?o==="center"?e.getCenterVisibleLeafColumns():o==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const ll={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},sl={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:T("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:o=>{var t;const n=(t=e.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[o.id])==null?void 0:t.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(e,o)=>{e.getCanGlobalFilter=()=>{var t,n,l,s;return((t=e.columnDef.enableGlobalFilter)!=null?t:!0)&&((n=o.options.enableGlobalFilter)!=null?n:!0)&&((l=o.options.enableFilters)!=null?l:!0)&&((s=o.options.getColumnCanGlobalFilter==null?void 0:o.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>K.includesString,e.getGlobalFilterFn=()=>{var o,t;const{globalFilterFn:n}=e.options;return Ce(n)?n:n==="auto"?e.getGlobalAutoFilterFn():(o=(t=e.options.filterFns)==null?void 0:t[n])!=null?o:K[n]},e.setGlobalFilter=o=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(o)},e.resetGlobalFilter=o=>{e.setGlobalFilter(o?void 0:e.initialState.globalFilter)}}},rl={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:T("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let o=!1,t=!1;e._autoResetExpanded=()=>{var n,l;if(!o){e._queue(()=>{o=!0});return}if((n=(l=e.options.autoResetAll)!=null?l:e.options.autoResetExpanded)!=null?n:!e.options.manualExpanding){if(t)return;t=!0,e._queue(()=>{e.resetExpanded(),t=!1})}},e.setExpanded=n=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(n),e.toggleAllRowsExpanded=n=>{n??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=n=>{var l,s;e.setExpanded(n?{}:(l=(s=e.initialState)==null?void 0:s.expanded)!=null?l:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const n=e.getState().expanded;return n===!0||Object.values(n).some(Boolean)},e.getIsAllRowsExpanded=()=>{const n=e.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||e.getRowModel().flatRows.some(l=>!l.getIsExpanded()))},e.getExpandedDepth=()=>{let n=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const r=s.split(".");n=Math.max(n,r.length)}),n},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,o)=>{e.toggleExpanded=t=>{o.setExpanded(n=>{var l;const s=n===!0?!0:!!(n!=null&&n[e.id]);let r={};if(n===!0?Object.keys(o.getRowModel().rowsById).forEach(u=>{r[u]=!0}):r=n,t=(l=t)!=null?l:!s,!s&&t)return{...r,[e.id]:!0};if(s&&!t){const{[e.id]:u,...i}=r;return i}return n})},e.getIsExpanded=()=>{var t;const n=o.getState().expanded;return!!((t=o.options.getIsRowExpanded==null?void 0:o.options.getIsRowExpanded(e))!=null?t:n===!0||n!=null&&n[e.id])},e.getCanExpand=()=>{var t,n,l;return(t=o.options.getRowCanExpand==null?void 0:o.options.getRowCanExpand(e))!=null?t:((n=o.options.enableExpanding)!=null?n:!0)&&!!((l=e.subRows)!=null&&l.length)},e.getIsAllParentsExpanded=()=>{let t=!0,n=e;for(;t&&n.parentId;)n=o.getRow(n.parentId,!0),t=n.getIsExpanded();return t},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},ze=0,Ee=10,Ve=()=>({pageIndex:ze,pageSize:Ee}),al={getInitialState:e=>({...e,pagination:{...Ve(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:T("pagination",e)}),createTable:e=>{let o=!1,t=!1;e._autoResetPageIndex=()=>{var n,l;if(!o){e._queue(()=>{o=!0});return}if((n=(l=e.options.autoResetAll)!=null?l:e.options.autoResetPageIndex)!=null?n:!e.options.manualPagination){if(t)return;t=!0,e._queue(()=>{e.resetPageIndex(),t=!1})}},e.setPagination=n=>{const l=s=>W(n,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(l)},e.resetPagination=n=>{var l;e.setPagination(n?Ve():(l=e.initialState.pagination)!=null?l:Ve())},e.setPageIndex=n=>{e.setPagination(l=>{let s=W(n,l.pageIndex);const r=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,r)),{...l,pageIndex:s}})},e.resetPageIndex=n=>{var l,s;e.setPageIndex(n?ze:(l=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?l:ze)},e.resetPageSize=n=>{var l,s;e.setPageSize(n?Ee:(l=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?l:Ee)},e.setPageSize=n=>{e.setPagination(l=>{const s=Math.max(1,W(n,l.pageSize)),r=l.pageSize*l.pageIndex,u=Math.floor(r/s);return{...l,pageIndex:u,pageSize:s}})},e.setPageCount=n=>e.setPagination(l=>{var s;let r=W(n,(s=e.options.pageCount)!=null?s:-1);return typeof r=="number"&&(r=Math.max(-1,r)),{...l,pageCount:r}}),e.getPageOptions=S(()=>[e.getPageCount()],n=>{let l=[];return n&&n>0&&(l=[...new Array(n)].fill(null).map((s,r)=>r)),l},y(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:n}=e.getState().pagination,l=e.getPageCount();return l===-1?!0:l===0?!1:n<l-1},e.previousPage=()=>e.setPageIndex(n=>n-1),e.nextPage=()=>e.setPageIndex(n=>n+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var n;return(n=e.options.pageCount)!=null?n:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var n;return(n=e.options.rowCount)!=null?n:e.getPrePaginationRowModel().rows.length}}},Pe=()=>({top:[],bottom:[]}),il={getInitialState:e=>({rowPinning:Pe(),...e}),getDefaultOptions:e=>({onRowPinningChange:T("rowPinning",e)}),createRow:(e,o)=>{e.pin=(t,n,l)=>{const s=n?e.getLeafRows().map(i=>{let{id:c}=i;return c}):[],r=l?e.getParentRows().map(i=>{let{id:c}=i;return c}):[],u=new Set([...r,e.id,...s]);o.setRowPinning(i=>{var c,d;if(t==="bottom"){var p,f;return{top:((p=i==null?void 0:i.top)!=null?p:[]).filter(h=>!(u!=null&&u.has(h))),bottom:[...((f=i==null?void 0:i.bottom)!=null?f:[]).filter(h=>!(u!=null&&u.has(h))),...Array.from(u)]}}if(t==="top"){var g,_;return{top:[...((g=i==null?void 0:i.top)!=null?g:[]).filter(h=>!(u!=null&&u.has(h))),...Array.from(u)],bottom:((_=i==null?void 0:i.bottom)!=null?_:[]).filter(h=>!(u!=null&&u.has(h)))}}return{top:((c=i==null?void 0:i.top)!=null?c:[]).filter(h=>!(u!=null&&u.has(h))),bottom:((d=i==null?void 0:i.bottom)!=null?d:[]).filter(h=>!(u!=null&&u.has(h)))}})},e.getCanPin=()=>{var t;const{enableRowPinning:n,enablePinning:l}=o.options;return typeof n=="function"?n(e):(t=n??l)!=null?t:!0},e.getIsPinned=()=>{const t=[e.id],{top:n,bottom:l}=o.getState().rowPinning,s=t.some(u=>n==null?void 0:n.includes(u)),r=t.some(u=>l==null?void 0:l.includes(u));return s?"top":r?"bottom":!1},e.getPinnedIndex=()=>{var t,n;const l=e.getIsPinned();if(!l)return-1;const s=(t=l==="top"?o.getTopRows():o.getBottomRows())==null?void 0:t.map(r=>{let{id:u}=r;return u});return(n=s==null?void 0:s.indexOf(e.id))!=null?n:-1}},createTable:e=>{e.setRowPinning=o=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(o),e.resetRowPinning=o=>{var t,n;return e.setRowPinning(o?Pe():(t=(n=e.initialState)==null?void 0:n.rowPinning)!=null?t:Pe())},e.getIsSomeRowsPinned=o=>{var t;const n=e.getState().rowPinning;if(!o){var l,s;return!!((l=n.top)!=null&&l.length||(s=n.bottom)!=null&&s.length)}return!!((t=n[o])!=null&&t.length)},e._getPinnedRows=(o,t,n)=>{var l;return((l=e.options.keepPinnedRows)==null||l?(t??[]).map(r=>{const u=e.getRow(r,!0);return u.getIsAllParentsExpanded()?u:null}):(t??[]).map(r=>o.find(u=>u.id===r))).filter(Boolean).map(r=>({...r,position:n}))},e.getTopRows=S(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(o,t)=>e._getPinnedRows(o,t,"top"),y(e.options,"debugRows")),e.getBottomRows=S(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(o,t)=>e._getPinnedRows(o,t,"bottom"),y(e.options,"debugRows")),e.getCenterRows=S(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(o,t,n)=>{const l=new Set([...t??[],...n??[]]);return o.filter(s=>!l.has(s.id))},y(e.options,"debugRows"))}},ul={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:T("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=o=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(o),e.resetRowSelection=o=>{var t;return e.setRowSelection(o?{}:(t=e.initialState.rowSelection)!=null?t:{})},e.toggleAllRowsSelected=o=>{e.setRowSelection(t=>{o=typeof o<"u"?o:!e.getIsAllRowsSelected();const n={...t},l=e.getPreGroupedRowModel().flatRows;return o?l.forEach(s=>{s.getCanSelect()&&(n[s.id]=!0)}):l.forEach(s=>{delete n[s.id]}),n})},e.toggleAllPageRowsSelected=o=>e.setRowSelection(t=>{const n=typeof o<"u"?o:!e.getIsAllPageRowsSelected(),l={...t};return e.getRowModel().rows.forEach(s=>{He(l,s.id,n,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=S(()=>[e.getState().rowSelection,e.getCoreRowModel()],(o,t)=>Object.keys(o).length?Me(e,t):{rows:[],flatRows:[],rowsById:{}},y(e.options,"debugTable")),e.getFilteredSelectedRowModel=S(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(o,t)=>Object.keys(o).length?Me(e,t):{rows:[],flatRows:[],rowsById:{}},y(e.options,"debugTable")),e.getGroupedSelectedRowModel=S(()=>[e.getState().rowSelection,e.getSortedRowModel()],(o,t)=>Object.keys(o).length?Me(e,t):{rows:[],flatRows:[],rowsById:{}},y(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const o=e.getFilteredRowModel().flatRows,{rowSelection:t}=e.getState();let n=!!(o.length&&Object.keys(t).length);return n&&o.some(l=>l.getCanSelect()&&!t[l.id])&&(n=!1),n},e.getIsAllPageRowsSelected=()=>{const o=e.getPaginationRowModel().flatRows.filter(l=>l.getCanSelect()),{rowSelection:t}=e.getState();let n=!!o.length;return n&&o.some(l=>!t[l.id])&&(n=!1),n},e.getIsSomeRowsSelected=()=>{var o;const t=Object.keys((o=e.getState().rowSelection)!=null?o:{}).length;return t>0&&t<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const o=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:o.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>o=>{e.toggleAllRowsSelected(o.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>o=>{e.toggleAllPageRowsSelected(o.target.checked)}},createRow:(e,o)=>{e.toggleSelected=(t,n)=>{const l=e.getIsSelected();o.setRowSelection(s=>{var r;if(t=typeof t<"u"?t:!l,e.getCanSelect()&&l===t)return s;const u={...s};return He(u,e.id,t,(r=n==null?void 0:n.selectChildren)!=null?r:!0,o),u})},e.getIsSelected=()=>{const{rowSelection:t}=o.getState();return Ue(e,t)},e.getIsSomeSelected=()=>{const{rowSelection:t}=o.getState();return Ge(e,t)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=o.getState();return Ge(e,t)==="all"},e.getCanSelect=()=>{var t;return typeof o.options.enableRowSelection=="function"?o.options.enableRowSelection(e):(t=o.options.enableRowSelection)!=null?t:!0},e.getCanSelectSubRows=()=>{var t;return typeof o.options.enableSubRowSelection=="function"?o.options.enableSubRowSelection(e):(t=o.options.enableSubRowSelection)!=null?t:!0},e.getCanMultiSelect=()=>{var t;return typeof o.options.enableMultiRowSelection=="function"?o.options.enableMultiRowSelection(e):(t=o.options.enableMultiRowSelection)!=null?t:!0},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var l;t&&e.toggleSelected((l=n.target)==null?void 0:l.checked)}}}},He=(e,o,t,n,l)=>{var s;const r=l.getRow(o,!0);t?(r.getCanMultiSelect()||Object.keys(e).forEach(u=>delete e[u]),r.getCanSelect()&&(e[o]=!0)):delete e[o],n&&(s=r.subRows)!=null&&s.length&&r.getCanSelectSubRows()&&r.subRows.forEach(u=>He(e,u.id,t,n,l))};function Me(e,o){const t=e.getState().rowSelection,n=[],l={},s=function(r,u){return r.map(i=>{var c;const d=Ue(i,t);if(d&&(n.push(i),l[i.id]=i),(c=i.subRows)!=null&&c.length&&(i={...i,subRows:s(i.subRows)}),d)return i}).filter(Boolean)};return{rows:s(o.rows),flatRows:n,rowsById:l}}function Ue(e,o){var t;return(t=o[e.id])!=null?t:!1}function Ge(e,o,t){var n;if(!((n=e.subRows)!=null&&n.length))return!1;let l=!0,s=!1;return e.subRows.forEach(r=>{if(!(s&&!l)&&(r.getCanSelect()&&(Ue(r,o)?s=!0:l=!1),r.subRows&&r.subRows.length)){const u=Ge(r,o);u==="all"?s=!0:(u==="some"&&(s=!0),l=!1)}}),l?"all":s?"some":!1}const Le=/([0-9]+)/gm,dl=(e,o,t)=>Ot(J(e.getValue(t)).toLowerCase(),J(o.getValue(t)).toLowerCase()),gl=(e,o,t)=>Ot(J(e.getValue(t)),J(o.getValue(t))),cl=(e,o,t)=>je(J(e.getValue(t)).toLowerCase(),J(o.getValue(t)).toLowerCase()),fl=(e,o,t)=>je(J(e.getValue(t)),J(o.getValue(t))),pl=(e,o,t)=>{const n=e.getValue(t),l=o.getValue(t);return n>l?1:n<l?-1:0},ml=(e,o,t)=>je(e.getValue(t),o.getValue(t));function je(e,o){return e===o?0:e>o?1:-1}function J(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Ot(e,o){const t=e.split(Le).filter(Boolean),n=o.split(Le).filter(Boolean);for(;t.length&&n.length;){const l=t.shift(),s=n.shift(),r=parseInt(l,10),u=parseInt(s,10),i=[r,u].sort();if(isNaN(i[0])){if(l>s)return 1;if(s>l)return-1;continue}if(isNaN(i[1]))return isNaN(r)?-1:1;if(r>u)return 1;if(u>r)return-1}return t.length-n.length}const re={alphanumeric:dl,alphanumericCaseSensitive:gl,text:cl,textCaseSensitive:fl,datetime:pl,basic:ml},vl={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:T("sorting",e),isMultiSortEvent:o=>o.shiftKey}),createColumn:(e,o)=>{e.getAutoSortingFn=()=>{const t=o.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const l of t){const s=l==null?void 0:l.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return re.datetime;if(typeof s=="string"&&(n=!0,s.split(Le).length>1))return re.alphanumeric}return n?re.text:re.basic},e.getAutoSortDir=()=>{const t=o.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var t,n;if(!e)throw new Error;return Ce(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(t=(n=o.options.sortingFns)==null?void 0:n[e.columnDef.sortingFn])!=null?t:re[e.columnDef.sortingFn]},e.toggleSorting=(t,n)=>{const l=e.getNextSortingOrder(),s=typeof t<"u"&&t!==null;o.setSorting(r=>{const u=r==null?void 0:r.find(g=>g.id===e.id),i=r==null?void 0:r.findIndex(g=>g.id===e.id);let c=[],d,p=s?t:l==="desc";if(r!=null&&r.length&&e.getCanMultiSort()&&n?u?d="toggle":d="add":r!=null&&r.length&&i!==r.length-1?d="replace":u?d="toggle":d="replace",d==="toggle"&&(s||l||(d="remove")),d==="add"){var f;c=[...r,{id:e.id,desc:p}],c.splice(0,c.length-((f=o.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else d==="toggle"?c=r.map(g=>g.id===e.id?{...g,desc:p}:g):d==="remove"?c=r.filter(g=>g.id!==e.id):c=[{id:e.id,desc:p}];return c})},e.getFirstSortDir=()=>{var t,n;return((t=(n=e.columnDef.sortDescFirst)!=null?n:o.options.sortDescFirst)!=null?t:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=t=>{var n,l;const s=e.getFirstSortDir(),r=e.getIsSorted();return r?r!==s&&((n=o.options.enableSortingRemoval)==null||n)&&(!(t&&(l=o.options.enableMultiRemove)!=null)||l)?!1:r==="desc"?"asc":"desc":s},e.getCanSort=()=>{var t,n;return((t=e.columnDef.enableSorting)!=null?t:!0)&&((n=o.options.enableSorting)!=null?n:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var t,n;return(t=(n=e.columnDef.enableMultiSort)!=null?n:o.options.enableMultiSort)!=null?t:!!e.accessorFn},e.getIsSorted=()=>{var t;const n=(t=o.getState().sorting)==null?void 0:t.find(l=>l.id===e.id);return n?n.desc?"desc":"asc":!1},e.getSortIndex=()=>{var t,n;return(t=(n=o.getState().sorting)==null?void 0:n.findIndex(l=>l.id===e.id))!=null?t:-1},e.clearSorting=()=>{o.setSorting(t=>t!=null&&t.length?t.filter(n=>n.id!==e.id):[])},e.getToggleSortingHandler=()=>{const t=e.getCanSort();return n=>{t&&(n.persist==null||n.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?o.options.isMultiSortEvent==null?void 0:o.options.isMultiSortEvent(n):!1))}}},createTable:e=>{e.setSorting=o=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(o),e.resetSorting=o=>{var t,n;e.setSorting(o?[]:(t=(n=e.initialState)==null?void 0:n.sorting)!=null?t:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},_l=[Ao,ol,Zo,el,Bo,Oo,ll,sl,vl,Qo,rl,al,il,ul,tl];function hl(e){var o,t;const n=[..._l,...(o=e._features)!=null?o:[]];let l={_features:n};const s=l._features.reduce((f,g)=>Object.assign(f,g.getDefaultOptions==null?void 0:g.getDefaultOptions(l)),{}),r=f=>l.options.mergeOptions?l.options.mergeOptions(s,f):{...s,...f};let i={...{},...(t=e.initialState)!=null?t:{}};l._features.forEach(f=>{var g;i=(g=f.getInitialState==null?void 0:f.getInitialState(i))!=null?g:i});const c=[];let d=!1;const p={_features:n,options:{...s,...e},initialState:i,_queue:f=>{c.push(f),d||(d=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();d=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{l.setState(l.initialState)},setOptions:f=>{const g=W(f,l.options);l.options=r(g)},getState:()=>l.options.state,setState:f=>{l.options.onStateChange==null||l.options.onStateChange(f)},_getRowId:(f,g,_)=>{var h;return(h=l.options.getRowId==null?void 0:l.options.getRowId(f,g,_))!=null?h:`${_?[_.id,g].join("."):g}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(f,g)=>{let _=(g?l.getPrePaginationRowModel():l.getRowModel()).rowsById[f];if(!_&&(_=l.getCoreRowModel().rowsById[f],!_))throw new Error;return _},_getDefaultColumnDef:S(()=>[l.options.defaultColumn],f=>{var g;return f=(g=f)!=null?g:{},{header:_=>{const h=_.header.column.columnDef;return h.accessorKey?h.accessorKey:h.accessorFn?h.id:null},cell:_=>{var h,x;return(h=(x=_.renderValue())==null||x.toString==null?void 0:x.toString())!=null?h:null},...l._features.reduce((_,h)=>Object.assign(_,h.getDefaultColumnDef==null?void 0:h.getDefaultColumnDef()),{}),...f}},y(e,"debugColumns")),_getColumnDefs:()=>l.options.columns,getAllColumns:S(()=>[l._getColumnDefs()],f=>{const g=function(_,h,x){return x===void 0&&(x=0),_.map(V=>{const D=Lo(l,V,x,h),b=V;return D.columns=b.columns?g(b.columns,D,x+1):[],D})};return g(f)},y(e,"debugColumns")),getAllFlatColumns:S(()=>[l.getAllColumns()],f=>f.flatMap(g=>g.getFlatColumns()),y(e,"debugColumns")),_getAllFlatColumnsById:S(()=>[l.getAllFlatColumns()],f=>f.reduce((g,_)=>(g[_.id]=_,g),{}),y(e,"debugColumns")),getAllLeafColumns:S(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(f,g)=>{let _=f.flatMap(h=>h.getLeafColumns());return g(_)},y(e,"debugColumns")),getColumn:f=>l._getAllFlatColumnsById()[f]};Object.assign(l,p);for(let f=0;f<l._features.length;f++){const g=l._features[f];g==null||g.createTable==null||g.createTable(l)}return l}function wl(){return e=>S(()=>[e.options.data],o=>{const t={rows:[],flatRows:[],rowsById:{}},n=function(l,s,r){s===void 0&&(s=0);const u=[];for(let c=0;c<l.length;c++){const d=Oe(e,e._getRowId(l[c],c,r),l[c],c,s,void 0,r==null?void 0:r.id);if(t.flatRows.push(d),t.rowsById[d.id]=d,u.push(d),e.options.getSubRows){var i;d.originalSubRows=e.options.getSubRows(l[c],c),(i=d.originalSubRows)!=null&&i.length&&(d.subRows=n(d.originalSubRows,s+1,d))}}return u};return t.rows=n(o),t},y(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Sl(e,o,t){return t.options.filterFromLeafRows?yl(e,o,t):Cl(e,o,t)}function yl(e,o,t){var n;const l=[],s={},r=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,u=function(i,c){c===void 0&&(c=0);const d=[];for(let f=0;f<i.length;f++){var p;let g=i[f];const _=Oe(t,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(_.columnFilters=g.columnFilters,(p=g.subRows)!=null&&p.length&&c<r){if(_.subRows=u(g.subRows,c+1),g=_,o(g)&&!_.subRows.length){d.push(g),s[g.id]=g,l.push(g);continue}if(o(g)||_.subRows.length){d.push(g),s[g.id]=g,l.push(g);continue}}else g=_,o(g)&&(d.push(g),s[g.id]=g,l.push(g))}return d};return{rows:u(e),flatRows:l,rowsById:s}}function Cl(e,o,t){var n;const l=[],s={},r=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,u=function(i,c){c===void 0&&(c=0);const d=[];for(let f=0;f<i.length;f++){let g=i[f];if(o(g)){var p;if((p=g.subRows)!=null&&p.length&&c<r){const h=Oe(t,g.id,g.original,g.index,g.depth,void 0,g.parentId);h.subRows=u(g.subRows,c+1),g=h}d.push(g),l.push(g),s[g.id]=g}}return d};return{rows:u(e),flatRows:l,rowsById:s}}function $l(){return(e,o)=>S(()=>{var t;return[(t=e.getColumn(o))==null?void 0:t.getFacetedRowModel()]},t=>{if(!t)return new Map;let n=new Map;for(let s=0;s<t.flatRows.length;s++){const r=t.flatRows[s].getUniqueValues(o);for(let u=0;u<r.length;u++){const i=r[u];if(n.has(i)){var l;n.set(i,((l=n.get(i))!=null?l:0)+1)}else n.set(i,1)}}return n},y(e.options,"debugTable"))}function Rl(){return e=>S(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(o,t,n)=>{if(!o.rows.length||!(t!=null&&t.length)&&!n){for(let f=0;f<o.flatRows.length;f++)o.flatRows[f].columnFilters={},o.flatRows[f].columnFiltersMeta={};return o}const l=[],s=[];(t??[]).forEach(f=>{var g;const _=e.getColumn(f.id);if(!_)return;const h=_.getFilterFn();h&&l.push({id:f.id,filterFn:h,resolvedValue:(g=h.resolveFilterValue==null?void 0:h.resolveFilterValue(f.value))!=null?g:f.value})});const r=(t??[]).map(f=>f.id),u=e.getGlobalFilterFn(),i=e.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());n&&u&&i.length&&(r.push("__global__"),i.forEach(f=>{var g;s.push({id:f.id,filterFn:u,resolvedValue:(g=u.resolveFilterValue==null?void 0:u.resolveFilterValue(n))!=null?g:n})}));let c,d;for(let f=0;f<o.flatRows.length;f++){const g=o.flatRows[f];if(g.columnFilters={},l.length)for(let _=0;_<l.length;_++){c=l[_];const h=c.id;g.columnFilters[h]=c.filterFn(g,h,c.resolvedValue,x=>{g.columnFiltersMeta[h]=x})}if(s.length){for(let _=0;_<s.length;_++){d=s[_];const h=d.id;if(d.filterFn(g,h,d.resolvedValue,x=>{g.columnFiltersMeta[h]=x})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const p=f=>{for(let g=0;g<r.length;g++)if(f.columnFilters[r[g]]===!1)return!1;return!0};return Sl(o.rows,p,e)},y(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Fl(){return e=>S(()=>[e.getState().sorting,e.getPreSortedRowModel()],(o,t)=>{if(!t.rows.length||!(o!=null&&o.length))return t;const n=e.getState().sorting,l=[],s=n.filter(i=>{var c;return(c=e.getColumn(i.id))==null?void 0:c.getCanSort()}),r={};s.forEach(i=>{const c=e.getColumn(i.id);c&&(r[i.id]={sortUndefined:c.columnDef.sortUndefined,invertSorting:c.columnDef.invertSorting,sortingFn:c.getSortingFn()})});const u=i=>{const c=i.map(d=>({...d}));return c.sort((d,p)=>{for(let g=0;g<s.length;g+=1){var f;const _=s[g],h=r[_.id],x=h.sortUndefined,V=(f=_==null?void 0:_.desc)!=null?f:!1;let D=0;if(x){const b=d.getValue(_.id),N=p.getValue(_.id),A=b===void 0,ne=N===void 0;if(A||ne){if(x==="first")return A?-1:1;if(x==="last")return A?1:-1;D=A&&ne?0:A?x:-x}}if(D===0&&(D=h.sortingFn(d,p,_.id)),D!==0)return V&&(D*=-1),h.invertSorting&&(D*=-1),D}return d.index-p.index}),c.forEach(d=>{var p;l.push(d),(p=d.subRows)!=null&&p.length&&(d.subRows=u(d.subRows))}),c};return{rows:u(t.rows),flatRows:l,rowsById:t.rowsById}},y(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * vue-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function ve(){return!0}const xl=Symbol("merge-proxy"),Vl={get(e,o,t){return o===xl?t:e.get(o)},has(e,o){return e.has(o)},set:ve,deleteProperty:ve,getOwnPropertyDescriptor(e,o){return{configurable:!0,enumerable:!0,get(){return e.get(o)},set:ve,deleteProperty:ve}},ownKeys(e){return e.keys()}};function ke(e){return"value"in e?e.value:e}function ae(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return new Proxy({get(n){for(let l=o.length-1;l>=0;l--){const s=ke(o[l])[n];if(s!==void 0)return s}},has(n){for(let l=o.length-1;l>=0;l--)if(n in ke(o[l]))return!0;return!1},keys(){const n=[];for(let l=0;l<o.length;l++)n.push(...Object.keys(ke(o[l])));return[...Array.from(new Set(n))]}},Vl)}const Pl=P({props:["render","props"],setup:e=>()=>typeof e.render=="function"||typeof e.render=="object"?B(e.render,e.props):e.render});function Ye(e){return ae(e,{data:a(e.data)})}function Ml(e){const o=wn(e.data),t=ae({state:{},onStateChange:()=>{},renderFallbackValue:null,mergeOptions(s,r){return o?{...s,...r}:ae(s,r)}},o?Ye(e):e),n=hl(t);if(o){const s=Sn(e.data);Ie(s,()=>{n.setState(r=>({...r,data:s.value}))},{immediate:!0})}const l=O(n.initialState);return yn(()=>{n.setOptions(s=>{var r;const u=new Proxy({},{get:(i,c)=>l.value[c]});return ae(s,o?Ye(e):e,{state:ae(u,(r=e.state)!=null?r:{}),onStateChange:i=>{i instanceof Function?l.value=i(l.value):l.value=i,e.onStateChange==null||e.onStateChange(i)}})})}),n}const kl={class:"sr-only"},Il=P({__name:"TableRowActions",props:{card:{},locations:{},shortcut:{},hideScrap:{type:Boolean},hideMove:{type:Boolean}},emits:["move"],setup(e,{emit:o}){const t=o;return(n,l)=>(w(),R(I,null,[n.hideScrap?z("",!0):(w(),F(a(j),{key:0,variant:"ghost",class:"w-8 h-8 p-0",onClick:l[0]||(l[0]=s=>t("move",n.card.id,"scrap"))},{default:v(()=>[m(a(Rt),{class:"w-4 h-4"})]),_:1})),n.hideMove?z("",!0):(w(),F(a(Ct),{key:1},{default:v(()=>[m(a(wt),{"as-child":""},{default:v(()=>[m(a(j),{variant:"ghost",class:"w-8 h-8 p-0"},{default:v(()=>[C("span",kl,$(n.$t("deck_builder.move_to")),1),m(a(to),{class:"w-4 h-4"})]),_:1})]),_:1}),m(a(St),{align:"end"},{default:v(()=>[m(a(Qn),null,{default:v(()=>[M($(n.$t("deck_builder.move_to")),1)]),_:1}),m(a(Yn)),(w(!0),R(I,null,E(n.locations,s=>(w(),F(a(yt),{key:s,onClick:r=>t("move",n.card.id,s)},{default:v(()=>[M($(a(it.capitalize)(s)),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})),n.shortcut?(w(),R(I,{key:2},[n.card.location!==n.shortcut?(w(),F(a(j),{key:0,variant:"ghost",class:"w-8 h-8 p-0",onClick:l[1]||(l[1]=s=>t("move",n.card.id,n.shortcut))},{default:v(()=>[m(a($t),{class:"w-4 h-4"})]),_:1})):(w(),F(a(j),{key:1,variant:"ghost",class:"w-8 h-8 p-0",onClick:l[2]||(l[2]=s=>t("move",n.card.id,"court"))},{default:v(()=>[m(a(so),{class:"w-4 h-4"})]),_:1}))],64)):z("",!0)],64))}}),Dl={key:0},bl={key:1,class:"w-4 h-4 mr-2"},zl=P({__name:"ListFilterDialog",props:{table:{}},emits:["update"],setup(e,{emit:o}){const t=o,n=Cn({}),l=k(()=>r=>Array.from(r.getFacetedUniqueValues().keys()).filter(u=>!!u).sort());function s(r,u){n[r]=Array.isArray(u)?u:[u],t("update",n)}return(r,u)=>(w(),F(a(Jn),null,{default:v(()=>[m(a(Nn),de(ge(r.$attrs)),{default:v(()=>[m(a(lo))]),_:1},16),m(a(Kn),null,{default:v(()=>[(w(!0),R(I,null,E(r.table.getAllColumns(),i=>(w(),R(I,{key:i.id},[i.getCanFilter()?(w(),R("div",Dl,[M($(r.$t(`deck_builder.table.${i.id}`))+" ",1),m(a(De),{"model-value":n[i.id],"onUpdate:modelValue":c=>s(i.id,c),type:"multiple",class:"flex-col items-start justify-start text-left"},{default:v(()=>[(w(!0),R(I,null,E(l.value(i),c=>(w(),F(a(be),{key:c,value:c,"aria-label":`Toggle ${c}`,size:"sm",class:"justify-start w-full !bg-transparent"},{default:v(()=>{var d;return[(d=n[i.id])!=null&&d.includes(c)?(w(),F(a(Ae),{key:0,class:"w-4 h-4 mr-2"})):(w(),R("div",bl)),M(" "+$(c),1)]}),_:2},1032,["value","aria-label"]))),128))]),_:2},1032,["model-value","onUpdate:modelValue"])])):z("",!0)],64))),128)),m(a(Xn),{class:"justify-start"},{default:v(()=>[m(a(Wn),{"as-child":""},{default:v(()=>[m(a(j),{class:"mr-2 w-fit"},{default:v(()=>[M($(r.$t("common.close")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),El={class:"mx-2"},Hl={class:"mx-2"},Gl={class:"mr-4 text-right whitespace-nowrap"},Ll=P({__name:"SwipableRow",props:{height:{},row:{},locations:{},shortcut:{}},setup(e){const o=e,t=$n(),n=k(()=>o.row.original),l=O(null),s=O(null),r=O("0"),{isSwiping:u,direction:i,lengthX:c}=Rn(s,{onSwipe(d){r.value=`${c.value*-1}px`},onSwipeEnd(d,p){Math.abs(c.value)>120&&(p==="right"&&t.onMove(n.value.id,"scrap"),o.shortcut&&p==="left"&&t.onMove(n.value.id,o.shortcut))}});return(d,p)=>(w(),R("div",{ref_key:"rowWrapper",ref:l,class:"relative",style:Xe({height:`${d.height}px`})},[C("div",{class:X(["absolute left-0 flex flex-row items-center w-1/2 h-full pl-2 bg-red-500 opacity-100 -z-20",{"!w-full !-z-10":a(u)&&a(i)==="right"}])},[m(a(Rt),{class:"w-8 h-8"}),C("span",El,$(d.$t("deck_builder.scrap")),1)],2),C("div",{class:X(["absolute right-0 flex flex-row-reverse items-center w-1/2 h-full pr-2 bg-blue-500 opacity-100 -z-20",{"!w-full !-z-10":a(u)&&a(i)==="left"}])},[m(a($t),{class:"w-8 h-8"}),C("span",Hl,$(d.$t("deck_builder.move_to_location",{location:d.shortcut})),1)],2),C("div",{ref_key:"rowEl",ref:s,class:X(["top-0 left-0 flex items-center w-full h-full bg-background",{absolute:a(u)}]),style:Xe({left:r.value})},[(w(!0),R(I,null,E(d.row.getVisibleCells(),f=>(w(),F(a(Pl),{key:f.id,render:f.column.columnDef.cell,props:f.getContext(),class:"p-2"},null,8,["render","props"]))),128)),C("div",Gl,[m(Il,{card:n.value,locations:d.locations,"hide-scrap":!0,onMove:a(t).onMove},null,8,["card","locations","onMove"])])],6)],4))}}),Al={class:"sticky top-0 z-10 flex items-center px-4 py-4 -mx-4 bg-black search-bar"},Bl={class:"-mx-4 overflow-x-hidden"},Ol={key:1,class:"h-24 text-lg text-center"},Tl=P({__name:"DeckBuilderList",props:{columns:{},data:{},locations:{},shortcut:{}},emits:["move"],setup(e,{emit:o}){const t=e,n=o,l=O([]),s=O(""),r=O([]),u=Ml({get data(){return t.data},get columns(){return t.columns},state:{get sorting(){return l.value},get columnFilters(){return r.value},get globalFilter(){return s.value},columnVisibility:{set:!1,location:!1}},getCoreRowModel:wl(),getSortedRowModel:Fl(),getFilteredRowModel:Rl(),getFacetedUniqueValues:$l(),onColumnFiltersChange:d=>We(d,r),onSortingChange:d=>We(d,l),onGlobalFilterChange:d=>{s.value=typeof d=="function"?d(s.value):d}});function i(d){u.setColumnFilters(Object.entries(d).reduce((p,[f,g])=>(p.push({id:f,value:g}),p),[]))}function c(d,p){n("move",d,p)}return(d,p)=>{var f;return w(),R(I,null,[C("div",Al,[m(a(Se),{class:"max-w-sm",placeholder:d.$t("deck_builder.table.filter"),"model-value":s.value,"onUpdate:modelValue":p[0]||(p[0]=g=>s.value=String(g))},null,8,["placeholder","model-value"]),m(zl,{table:a(u),class:"ml-2",onUpdate:i},null,8,["table"])]),C("div",Bl,[(f=a(u).getRowModel().rows)!=null&&f.length?(w(!0),R(I,{key:0},E(a(u).getRowModel().rows,g=>(w(),F(Ll,{key:g.id,height:64,row:g,"data-state":g.getIsSelected()?"selected":void 0,locations:d.locations,shortcut:d.shortcut,onMove:c},null,8,["row","data-state","locations","shortcut"]))),128)):(w(),R("div",Ol,$(d.$t("deck_builder.no_results")),1))])],64)}}}),Ul=we(Tl,[["__scopeId","data-v-c9fa2387"]]),jl={key:0,class:"w-full py-2 text-lg"},ql={key:1,class:"w-full py-2 text-md"},Nl={class:"mb-4 text-left"},Kl={key:0,class:"text-left"},Xl={class:"mt-4 text-lg font-bold"},Wl=["innerHTML"],Tt=P({__name:"DeckBuilder",props:{tags:{},excludeTags:{},title:{},description:{},shortcut:{}},setup(e){const o=e;Fn(()=>{n.initPool()});const t=ye(),n=xn(),l=O(!1),s=O(),r=k(()=>{Array.from(n.pool.values()).map(f=>f.location);let p=Array.from(n.pool.values()).filter(f=>{var g;return!((g=f.meta)!=null&&g.act)||f.meta.act<=t.settings.act});return o.tags&&(p=p.filter(f=>{var g;return(g=f.tags)==null?void 0:g.some(_=>{var h;return(h=o.tags)==null?void 0:h.includes(_)})})),o.excludeTags&&(p=p.filter(f=>{var g;return(g=f.tags)==null?void 0:g.every(_=>{var h;return!((h=o.excludeTags)!=null&&h.includes(_))})})),p}),u=k(()=>Vn.concat(t.players.map(p=>p.name)).filter(p=>!!p)),i=k(()=>{if(o.shortcut&&u.value.includes(o.shortcut))return o.shortcut});function c(p,f){n.moveCardTo(p,f)}async function d(){s.value=await n.autoAssign(),l.value=!0}return(p,f)=>(w(),R(I,null,[p.title?(w(),R("p",jl,$(p.title),1)):z("",!0),p.description?(w(),R("p",ql,$(p.description),1)):z("",!0),C("p",null,[m(j,{variant:"secondary",onClick:f[0]||(f[0]=g=>l.value=!0)},{default:v(()=>[M($(p.$t("deck_builder.assign")),1)]),_:1})]),m(Ul,{columns:a(zo),data:r.value,locations:u.value,shortcut:i.value,onMove:c},null,8,["columns","data","locations","shortcut"]),m(a(zn),{open:l.value,"onUpdate:open":f[2]||(f[2]=g=>l.value=g)},{default:v(()=>[m(a(Pn),null,{default:v(()=>[m(a(Mn),null,{default:v(()=>[m(a(kn),null,{default:v(()=>[M($(p.$t("deck_builder.assign")),1)]),_:1}),m(a(In),null,{default:v(()=>[C("p",Nl,$(p.$t("deck_builder.assign_help")),1),m(a(Dn),{keypath:"deck_builder.assign_action",tag:"p",class:"text-left"},{action:v(()=>[m(j,{variant:"secondary",size:"sm",class:"mx-2",onClick:f[1]||(f[1]=g=>d())},{default:v(()=>[M($(p.$t("deck_builder.assign")),1)]),_:1})]),_:1}),s.value?(w(),R("div",Kl,[C("p",Xl,$(p.$t("deck_builder.result")),1),C("ul",null,[(w(!0),R(I,null,E(s.value,(g,_)=>(w(),R("li",{key:_,innerHTML:g,class:"capitalize"},null,8,Wl))),128))])])):z("",!0)]),_:1})]),_:1}),m(a(bn),null,{default:v(()=>[m(a(ro),null,{default:v(()=>[M($(p.$t("common.close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Jl={class:"w-full max-w-lg"},Ql={class:"align-middle"},Yl={class:"flex items-center my-4 space-x-2"},Zl={class:"w-16 ml-2 text-right whitespace-nowrap"},es=P({__name:"PlayerLog",props:{player:{},act:{}},setup(e){const o=e,t=ye(),n=k(()=>Object.values(Y).filter(i=>i!==Y.empire&&i!==Y.free)),l=k(()=>{const i=[];return t.players.forEach(c=>c.fateHistory.forEach(([d])=>i.push(d))),i});function s(i){t.settings.firstRegent===o.player.name&&!i?t.settings.firstRegent="":t.settings.firstRegent=o.player.name}function r(i){const c={...i,color:o.player.color};t.updatePlayer(c)}function u(i,{act:c,power:d,succeeded:p,currentFate:f}){const g={},_=[...o.player.fateHistory];_[c]=[i,d,p],g.fateHistory=_,f&&(g.currentFate=i),g.power=_.reduce((h,[,x])=>(h+=x??0,h),0),r(g)}return(i,c)=>(w(),F(a(Ft),{"default-value":"board",class:"px-4"},{default:v(()=>[m(a(xt),{class:"w-full"},{default:v(()=>[m(a(_e),{value:"board"},{default:v(()=>[M($(i.$t("player_area.board")),1)]),_:1}),m(a(_e),{value:"court"},{default:v(()=>[M($(i.$t("player_area.court")),1)]),_:1}),m(a(_e),{value:"flagship"},{default:v(()=>[M($(i.$t("player_area.flagship")),1)]),_:1})]),_:1}),m(a(he),{value:"board"},{default:v(()=>[C("div",Jl,[m(a(Se),{class:"my-2",placeholder:i.$t("player_area.name"),"model-value":i.player.name,"onUpdate:modelValue":c[0]||(c[0]=d=>r({name:d}))},null,8,["placeholder","model-value"]),i.player.color?z("",!0):(w(),F(a(Vt),{key:0},{default:v(()=>[m(a(Mt),{class:"my-2"},{default:v(()=>[m(a(Pt),{placeholder:i.$t("player_area.color")},null,8,["placeholder"])]),_:1}),m(a(kt),null,{default:v(()=>[(w(!0),R(I,null,E(n.value,d=>(w(),F(a(It),{key:d,value:d},{default:v(()=>[C("span",{class:X(["inline-block w-4 h-4 mr-2 align-middle border rounded-full border-slate-950",d!==a(Y).white?`bg-${d.toLowerCase()}-400`:"bg-white"])},null,2),C("span",Ql,$(i.$t(`colors.${d}`)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})),C("div",Yl,[m(a(co),{id:"empire-status",name:"empire-status",checked:i.player.empireStatus===a(Q).regent,value:i.player.empireStatus,size:"","onUpdate:checked":c[1]||(c[1]=d=>r({empireStatus:d?a(Q).regent:a(Q).outlaw}))},null,8,["checked","value"]),m(a(ee),{for:"empire-status"},{default:v(()=>[m(a(fo),{class:X(["text-white rounded-sm",{"bg-empire-600":i.player.empireStatus===a(Q).regent,"bg-orange-900":i.player.empireStatus===a(Q).outlaw}])},{default:v(()=>[M($(i.$t(`empire_status.${i.player.empireStatus}`)),1)]),_:1},8,["class"])]),_:1}),i.player.empireStatus===a(Q).regent?(w(),F(a(Dt),{key:0,id:"first-regent",checked:a(t).settings.firstRegent===i.player.name,"onUpdate:checked":s},null,8,["checked"])):z("",!0),i.player.empireStatus===a(Q).regent?(w(),F(a(ee),{key:1,for:"first-regent",class:"ml-2"},{default:v(()=>[M($(i.$t("empire_status.FIRST_REGENT")),1)]),_:1})):z("",!0),c[8]||(c[8]=C("div",{class:"flex grow"},null,-1)),C("div",Zl,[C("p",null,[M($(i.$t("player_area.power"))+": ",1),C("strong",null,$(i.player.power),1)])])]),m(bo,{class:"my-2",player:i.player,act:i.act,unavailableFates:l.value,onAdd:c[2]||(c[2]=()=>r({color:i.player.color,fateHistory:[...i.player.fateHistory,[]]})),onUpdate:c[3]||(c[3]=(d,p)=>u(d,p))},null,8,["player","act","unavailableFates"]),m(wo,{class:"my-2",player:i.player,onUpdate:c[4]||(c[4]=d=>r({resources:[...i.player.resources,d]}))},null,8,["player"]),m(Ro,{class:"my-2",player:i.player,onUpdate:c[5]||(c[5]=d=>r({outrage:[...i.player.outrage,d]}))},null,8,["player"]),m(a(ut),{class:"my-2",placeholder:i.$t("player_area.notes"),"model-value":i.player.notes,"onUpdate:modelValue":c[6]||(c[6]=d=>r({notes:d}))},null,8,["placeholder","model-value"])])]),_:1}),m(a(he),{value:"court"},{default:v(()=>[m(Tt,{title:i.$t("deck_builder.player_court"),description:i.$t("deck_builder.swipe_help"),tags:[a(Z).ability,a(Z).guild,a(Z).title,a(Z).lore],shortcut:i.player.name},null,8,["title","description","tags","shortcut"])]),_:1}),m(a(he),{value:"flagship"},{default:v(()=>[m(Zn,{player:i.player,onUpdate:c[7]||(c[7]=d=>r({flagshipState:d}))},null,8,["player"])]),_:1})]),_:1}))}}),ts=we(es,[["__scopeId","data-v-55d0649c"]]),ns={class:"w-full py-2 text-lg"},os={class:"flex mt-2"},ls={key:0,class:"font-bold text-destructive"},ss={key:1,class:"my-16 space-x-4 text-center"},rs={class:"inline-flex items-center justify-center rounded-md"},as=P({__name:"CampaignMisc",setup(e){const o=ye(),{t}=En(),{toast:n}=Hn(),l=k(()=>o.settings.id),s=O(!1);function r(c){o.settings.notes=c}function u(){o.settings.name=Gn()}async function i(c){s.value=!1;try{const d=await o.saveGame(c);o.loadGame(d.id),n({title:c?t("toast.game_updated",{name:d.name}):t("toast.game_saved",{name:d.name}),duration:3e3})}catch{s.value=!0}}return(c,d)=>(w(),R(I,null,[C("p",ns,$(c.$t("campaign.misc_help_text")),1),C("div",os,[m(a(Se),{class:X(["max-w-sm",{"border-destructive":s.value}]),"model-value":a(o).settings.name,placeholder:c.$t("campaign.name"),"onUpdate:modelValue":d[0]||(d[0]=p=>a(o).settings.name=p)},null,8,["class","model-value","placeholder"]),m(a(j),{variant:"ghost",size:"icon",class:"ml-2",onClick:u},{default:v(()=>[m(a(oo),{size:24})]),_:1})]),s.value?(w(),R("p",ls,$(a(t)("validations.name_already_exists")),1)):z("",!0),m(a(ut),{class:"my-2 min-h-40",placeholder:c.$t("campaign.notes"),"model-value":a(o).settings.notes,"onUpdate:modelValue":d[1]||(d[1]=p=>r(p))},null,8,["placeholder","model-value"]),l.value?(w(),R("div",ss,[m(a(j),{onClick:d[2]||(d[2]=p=>a(o).exportGame(l.value))},{default:v(()=>[M($(c.$t("common.download")),1)]),_:1}),C("div",rs,[m(a(j),{class:"rounded-r-none",onClick:d[3]||(d[3]=p=>i(a(o).settings.id))},{default:v(()=>[M($(c.$t("common.update")),1)]),_:1}),m(a(Ct),null,{default:v(()=>[m(a(wt),null,{default:v(()=>[m(a(j),{class:"rounded-l-none",size:"icon"},{default:v(()=>[m(a(Be))]),_:1})]),_:1}),m(a(St),{class:"border-0 bg-primary text-primary-foreground",side:"top",align:"end"},{default:v(()=>[m(a(yt),{onClick:d[4]||(d[4]=p=>i())},{default:v(()=>[M($(c.$t("common.create_new")),1)]),_:1})]),_:1})]),_:1})])])):z("",!0)],64))}}),is={class:"viewport"},us={key:0,class:"p-4"},ds={class:"mb-8"},gs={class:"w-full mb-4 text-xl"},cs={class:"w-full mb-2 text-xl"},fs=["src"],ps={key:1},ms=["src"],vs={key:2},_s={key:3,class:"p-4 pb-0"},hs={key:4,class:"p-4"},ws=P({__name:"CampaignCreator",setup(e){const o=Ln(),t=An(),n=ye(),l=Bn(),s=k({get(){return n.players.map(d=>d.color)},set(d){n.updatePlayers(d)}}),r=k(()=>l.currentScreen),u=O(s.value[0]),i=Object.values(Y).filter(d=>d!==Y.empire&&d!==Y.free);function c(d,p){const f={...p,color:d};n.updatePlayer(f)}return Ie(t,async({query:d})=>{d.mode==="create"&&n.settings.id&&(n.$reset(),d.id&&await o.replace({name:"campaign",query:{...d,screen:oe.Settings,id:void 0}}))},{immediate:!0}),Ie([s,()=>n.settings.act],()=>{(u.value===void 0||!s.value.includes(u.value))&&(u.value=s.value[0]),n.players.forEach(d=>{d.fateHistory=Array(n.settings.act).fill([]).map((p,f)=>d.fateHistory[f]??p)})}),(d,p)=>(w(),R("main",is,[r.value===a(oe).Settings?(w(),R("div",us,[C("div",ds,[C("p",gs,$(d.$t("campaign.which_act_just_ended?")),1),m(a(De),{type:"single","default-value":a(n).settings.act.toString(),"onUpdate:modelValue":p[0]||(p[0]=f=>a(n).settings.act=parseInt(f))},{default:v(()=>[(w(),R(I,null,E([1,2],f=>m(a(be),{key:f,value:`${f}`,size:"lg",class:"mx-1 data-[state=on]:bg-primary data-[state=on]:text-primary-foreground bg-accent"},{default:v(()=>[M($(d.$t("act",{n:f})),1)]),_:2},1032,["value"])),64))]),_:1},8,["default-value"])]),C("div",null,[C("p",cs,$(d.$t("campaign.who_is_playing?")),1),m(a(De),{modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=f=>s.value=f),type:"multiple",class:"grid grid-cols-2 justify-stretch gap-y-4"},{default:v(()=>[(w(!0),R(I,null,E(a(i),f=>(w(),R("div",{key:f,class:"flex flex-col items-center justify-start mx-3 min-h-44"},[m(a(be),{value:f,class:"player-toggle"},{default:v(()=>[C("img",{class:"agent-button",src:`./images/${f.toLowerCase()}_agent.png`},null,8,fs)]),_:2},1032,["value"]),a(n).players.find(g=>g.color===f)?(w(),F(a(Se),{key:0,"model-value":a(n).players.find(g=>g.color===f).name,class:"w-24 mt-2",onClick:p[1]||(p[1]=ue(()=>{},["stop"])),"onUpdate:modelValue":g=>c(f,{name:g})},null,8,["model-value","onUpdate:modelValue"])):z("",!0)]))),128))]),_:1},8,["modelValue"])])])):z("",!0),r.value===a(oe).Players?(w(),R("div",ps,[m(a(Ft),{modelValue:u.value,"onUpdate:modelValue":p[3]||(p[3]=f=>u.value=f),class:"player-tabs","default-value":"board"},{default:v(()=>[m(a(xt),{class:"w-full h-auto bg-transparent"},{default:v(()=>[(w(!0),R(I,null,E(a(n).players,f=>(w(),F(a(_e),{key:f.color,value:f.color,class:"mx-2 player-tab-trigger"},{default:v(()=>[C("img",{class:"h-12",src:`./images/${f.color.toLowerCase()}_agent.png`},null,8,ms)]),_:2},1032,["value"]))),128))]),_:1}),(w(!0),R(I,null,E(a(n).players,f=>(w(),F(a(he),{key:f.color,value:f.color},{default:v(()=>[m(ts,{player:f,act:a(n).settings.act},null,8,["player","act"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])):z("",!0),r.value===a(oe).Map?(w(),R("div",vs,[m(On)])):z("",!0),r.value===a(oe).Deck?(w(),R("div",_s,[m(Tt,{title:d.$t("deck_builder.title"),description:d.$t("deck_builder.swipe_help"),"exclude-tags":[a(Z).setup,a(Z).resolution,a(Z).objective],shortcut:"court"},null,8,["title","description","exclude-tags"])])):z("",!0),r.value===a(oe).Misc?(w(),R("div",hs,[m(as)])):z("",!0)]))}}),Ss=we(ws,[["__scopeId","data-v-d25fda9a"]]),xs=P({__name:"CampaignCreatorView",setup(e){return(o,t)=>(w(),F(Ss))}});export{xs as default};
