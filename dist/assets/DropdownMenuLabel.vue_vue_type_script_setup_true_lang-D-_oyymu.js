import{O as ne,r as ie,s as re,t as le}from"./SystemDialog.vue_vue_type_script_setup_true_lang-D6wzMRCx.js";import{f as J,d as C,x as E,o as s,h as v,w as _,i as M,n as Q,l as ee,u as t,aY as pe,g as y,e as P,m as D,j as F,aZ as ce,a_ as de,ap as ue,al as j,a$ as fe,a9 as B,_ as z,ao as ge,c as u,b0 as me,a as w,t as T,aV as K,aP as I,F as b,T as Y,aO as k,aN as Z,az as ye,ag as he,r as G,b1 as _e,q as R,b2 as ve,b3 as Ce,b4 as xe,b5 as we,b6 as $e,b7 as be}from"./index-CbcyyI3W.js";/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=J("RedoIcon",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-vue-next v0.406.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=J("SparklesIcon",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Pe="/Arcs-CAT/images/board-flagship.jpg",Me=C({__name:"Popover",props:{defaultOpen:{type:Boolean},open:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(p,{emit:r}){const o=E(p,r);return(i,m)=>(s(),v(t(pe),Q(ee(t(o))),{default:_(()=>[M(i.$slots,"default")]),_:3},16))}}),De=C({inheritAttrs:!1,__name:"PopoverContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{default:4},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(p,{emit:r}){const e=p,n=r,o=y(()=>{const{class:m,...c}=e;return c}),i=E(o,n);return(m,c)=>(s(),v(t(de),null,{default:_(()=>[P(t(ce),D({...t(i),...m.$attrs},{class:t(F)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:_(()=>[M(m.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Ae=C({__name:"PlayerFlagshipPreview",props:{piece:{},pieceId:{}},emits:["close"],setup(p,{emit:r}){const e=p,n=r,o=ue(),i=y(()=>o.players.find(f=>f.color===e.piece.color)),m=y(()=>({position:"absolute",top:"224px",left:`${e.piece.position.x+112}px`}));function c(f){var g,h;if(!((g=i.value)!=null&&g.color))return;const l={...f,color:(h=i.value)==null?void 0:h.color};o.updatePlayer(l)}return(f,l)=>(s(),v(t(Me),{open:!0},{default:_(()=>[P(t(fe),{style:j(m.value)},null,8,["style"]),P(t(De),{class:"w-[484px] p-1"},{default:_(()=>[P(t(ne),{onTrigger:l[1]||(l[1]=g=>n("close"))},{default:_(()=>[i.value?(s(),v(Ue,{key:0,player:i.value,onUpdate:l[0]||(l[0]=g=>c({flagshipState:g}))},null,8,["player"])):B("",!0)]),_:1})]),_:1})]),_:1}))}}),Oe=["id"],Se=["src","width","draggable"],ze=["data-src"],Fe={x:"50%",y:"50%",textLength:"200",lengthAdjust:"spacingAndGlyphs","dominant-baseline":"middle","text-anchor":"middle"},Le={key:2,class:"absolute flex items-center pointer-events-none right-10 -bottom-6"},Te={class:"grid grid-flow-col px-4 py-2 bg-black shrink-0 rounded-xl"},Ie={class:"mr-2 text-5xl"},je={key:0,class:"h-[3rem]",src:ie,alt:"Arrow"},Ee={key:1,class:"h-[3rem]",src:re,alt:"Hex"},He={key:2,class:"h-[3rem]",src:le,alt:"Moon"},Ve={key:3,class:"mr-2 text-5xl"},Ge={key:0,class:"flex items-center px-4 py-2 ml-2 bg-black pointer-events-none rounded-xl"},Ne={class:"mr-2 text-5xl"},Re={key:1,class:"flex items-center px-4 py-2 ml-2 bg-black pointer-events-none rounded-xl"},We={class:"mr-2 text-5xl"},U=300,qe=C({__name:"GamePiece",props:{pieceConfig:{},scale:{},systemPosition:{},translate:{type:Boolean},openPreview:{type:Boolean}},emits:["reposition","previewClose","pressClick","pressStart","pressMove","pressEnd","pressDrop"],setup(p,{emit:r}){const e=p,n=r,o=y(()=>e.pieceConfig.color?`${e.pieceConfig.type}-${e.pieceConfig.color}-${e.pieceConfig.system}`:`${e.pieceConfig.type}-${e.pieceConfig.system}`),i=y(()=>{var a,d,x,A,O,S,V,q;return"group"in e.pieceConfig?Object.values(Y).includes(e.pieceConfig.type)?`./images/tokens/${(a=e.pieceConfig.type)==null?void 0:a.toLowerCase()}.png`:`./images/${(d=e.pieceConfig.color)==null?void 0:d.toLowerCase()}_${(x=e.pieceConfig.type)==null?void 0:x.toLowerCase()}.png`:Object.values(Y).includes(e.pieceConfig.type)?`./images/tokens/${(A=e.pieceConfig.type)==null?void 0:A.toLowerCase()}${e.pieceConfig.isFresh?"":"_flip"}.png`:I(e.pieceConfig.type)?`./images/${(O=e.pieceConfig.color)==null?void 0:O.toLowerCase()}_${(S=e.pieceConfig.type)==null?void 0:S.toLowerCase()}.png`:`./images/${(V=e.pieceConfig.color)==null?void 0:V.toLowerCase()}_${(q=e.pieceConfig.type)==null?void 0:q.toLowerCase()}${e.pieceConfig.isFresh?"":"_flip"}.png`}),m=y(()=>{const a={x:e.pieceConfig.position.x,y:e.pieceConfig.position.y};let d=`translate(${a.x}px, ${a.y}px) scale(${e.scale??.4})`;return Object.values(k).includes(e.pieceConfig.type)||(d="translate(-50%, -50%) "+d),e.pieceConfig.type===Z.ship&&"isFresh"in e.pieceConfig&&!e.pieceConfig.isFresh&&(d=`${d} translate(100%, 100%) rotate(180deg)`),d}),c=y(()=>({left:0,top:0,zIndex:e.pieceConfig.type===Z.ship?1:"auto",transform:m.value})),f=y(()=>{if(e.pieceConfig.color===ye.free)return 300;if(I(e.pieceConfig.type))return 332}),l=z(!1);function g(){l.value=!0}const h=z(),$=z(),W=z(0),H=z(!0);function te(a){a.preventDefault();const d=a.touches[0];W.value=Date.now(),h.value=d,n("pressStart",d),setTimeout(()=>H.value=!1,U)}function oe(a){if(H.value)return;a.preventDefault();const d=a.touches[0];$.value=d,n("pressMove",d)}function se(a){if(a.preventDefault(),H.value=!0,Date.now()-W.value<U){a.stopPropagation(),n("pressClick",h.value);return}const d=$.value&&document.elementsFromPoint($.value.clientX,$.value.clientY).find(x=>x.getAttribute("data-path-system-id"));if(d){const x=d.getAttribute("data-path-system-id");n("pressDrop",x)}else n("pressEnd",h.value)}const L=y(()=>!K(e.pieceConfig.type)||!("group"in e.pieceConfig)&&!e.pieceConfig.slot),ae={touchstart:L.value?te:null,touchmove:L.value?oe:null,touchend:L.value?se:null};return ge(()=>{e.pieceConfig.position.x<0&&e.pieceConfig.position.y<0&&n("reposition",e.pieceConfig.system)}),(a,d)=>{var x,A,O,S;return s(),u("div",{id:o.value,class:"absolute",style:j(c.value)},[l.value?(s(),u("svg",{key:1,class:"absolute fallback",width:"250",height:"250","data-src":i.value},[w("text",Fe,T(a.pieceConfig.type),1)],8,ze)):(s(),u("img",D({key:0,style:{maxWidth:"initial"},src:i.value,width:f.value,draggable:L.value},me(ae),{onError:g}),null,16,Se)),t(K)(a.pieceConfig.type)?B("",!0):(s(),u("div",Le,[w("div",Te,[w("span",Ie,T((x=e.pieceConfig.system)==null?void 0:x.charAt(0)),1),((A=e.pieceConfig.system)==null?void 0:A.charAt(1))==="A"?(s(),u("img",je)):((O=e.pieceConfig.system)==null?void 0:O.charAt(1))==="H"?(s(),u("img",Ee)):((S=e.pieceConfig.system)==null?void 0:S.charAt(1))==="C"?(s(),u("img",He)):(s(),u("span",Ve," G "))]),"group"in a.pieceConfig&&!t(I)(a.pieceConfig.type)?(s(),u(b,{key:0},[a.pieceConfig.group.damaged.length>0?(s(),u("div",Ge,[w("span",Ne,T(a.pieceConfig.group.damaged.length),1),P(t(ke),{size:40})])):B("",!0),a.pieceConfig.group.fresh.length>0?(s(),u("div",Re,[w("span",We,T(a.pieceConfig.group.fresh.length),1),P(t(Be),{size:40})])):B("",!0)],64)):B("",!0)])),t(I)(a.pieceConfig.type)&&a.openPreview?(s(),v(Ae,{key:3,piece:a.pieceConfig,"piece-id":o.value,onClose:d[0]||(d[0]=V=>n("previewClose"))},null,8,["piece","piece-id"])):B("",!0)],12,Oe)}}}),N={slipstreamDrive:{upgrade:{x:-80,y:25},armor:{x:-79,y:-86}},tractorBeam:{upgrade:{x:51,y:25},armor:{x:51,y:-86}},controlArray:{upgrade:{x:182,y:25},armor:{x:182,y:-86}},defenseArray:{upgrade:{x:483,y:25},armor:{x:483,y:-86}},shipCrane:{upgrade:{x:614,y:25},armor:{x:614,y:-86}},hull:{upgrade:{x:745,y:25},armor:{x:745,y:-86}}},X="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='300'%20height='300'%20viewBox='0%200%20300%20300'%3e%3cpath%20fill='transparent'%20d='M%20147.00,10.44%20C%20166.49,8.37%20174.03,22.50%20182.28,37.00%20182.28,37.00%20193.80,57.00%20193.80,57.00%20193.80,57.00%20221.42,105.00%20221.42,105.00%20221.42,105.00%20271.72,192.00%20271.72,192.00%20271.72,192.00%20289.01,222.00%20289.01,222.00%20294.34,231.08%20299.41,237.99%20298.96,249.00%20298.27,265.99%20285.22,275.97%20269.00,275.92%20269.00,275.92%2062.00,275.92%2062.00,275.92%2062.00,275.92%2040.00,275.92%2040.00,275.92%2040.00,275.92%2024.00,275.92%2024.00,275.92%2013.52,273.91%205.34,266.00%202.22,256.00%201.18,252.68%200.90,249.46%201.04,246.00%201.40,236.97%206.55,229.55%2010.99,222.00%2010.99,222.00%2030.00,189.00%2030.00,189.00%2030.00,189.00%20103.85,61.00%20103.85,61.00%20103.85,61.00%20120.01,33.00%20120.01,33.00%20123.04,27.84%20126.56,21.21%20131.04,17.33%20136.12,12.93%20140.61,11.63%20147.00,10.44%20Z'%20/%3e%3c/svg%3e",Ke={class:"relative w-full overflow-auto flagship-wrapper"},Ye=["src","onClick"],Ze=["src","onClick"],Ue=C({__name:"PlayerFlagship",props:{player:{},offset:{default:()=>({x:0,y:0})}},emits:["update"],setup(p,{emit:r}){const e=p,n=r;let o={};const i={position:"absolute",scale:.35};function m(c,f){o[f]??(o[f]={});const l=o[f][c];l===void 0?o[f][c]=[k.city,!0]:l[0]===k.city?o[f][c]=l[1]===!0?[k.city,!1]:[k.starport,!0]:l[0]===k.starport&&(o[f][c]=l[1]===!0?[k.starport,!1]:void 0),n("update",o)}return he(()=>e.player.flagshipState,c=>{o={...c??{}}},{immediate:!0}),(c,f)=>(s(),u("div",Ke,[f[0]||(f[0]=w("div",{class:"w-[967px]"},[w("img",{src:Pe})],-1)),(s(!0),u(b,null,G(c.player.flagshipState,(l,g)=>(s(),u(b,{key:g},[(s(!0),u(b,null,G(l,(h,$)=>(s(),u(b,{key:`${g}-${$}`},[h?(s(),v(qe,{key:0,scale:.35,"piece-config":{type:h[0],isFresh:h[1],color:c.player.color,position:{x:t(N)[g][$].x+c.offset.x,y:t(N)[g][$].y+c.offset.y}}},null,8,["piece-config"])):B("",!0)],64))),128))],64))),128)),(s(!0),u(b,null,G(t(N),(l,g)=>(s(),u(b,{key:g},[w("img",{style:j({...i,top:`${l.upgrade.y}px`,left:`${l.upgrade.x}px`}),src:t(X),onClick:h=>m("upgrade",g)},null,12,Ye),w("img",{style:j({...i,top:`${l.armor.y}px`,left:`${l.armor.x}px`}),src:t(X),onClick:h=>m("armor",g)},null,12,Ze)],64))),128))]))}}),Qe=C({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(p,{emit:r}){const o=E(p,r);return(i,m)=>(s(),v(t(_e),Q(ee(t(o))),{default:_(()=>[M(i.$slots,"default")]),_:3},16))}}),et=C({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(p){const e=R(p);return(n,o)=>(s(),v(t(ve),D({class:"outline-none"},t(e)),{default:_(()=>[M(n.$slots,"default")]),_:3},16))}}),tt=C({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(p,{emit:r}){const e=p,n=r,o=y(()=>{const{class:m,...c}=e;return c}),i=E(o,n);return(m,c)=>(s(),v(t(xe),null,{default:_(()=>[P(t(Ce),D(t(i),{class:t(F)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:_(()=>[M(m.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ot=C({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(p){const r=p,e=y(()=>{const{class:o,...i}=r;return i}),n=R(e);return(o,i)=>(s(),v(t(we),D(t(n),{class:t(F)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o.inset&&"pl-8",r.class)}),{default:_(()=>[M(o.$slots,"default")]),_:3},16,["class"]))}}),st=C({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const r=p,e=y(()=>{const{class:n,...o}=r;return o});return(n,o)=>(s(),v(t($e),D(e.value,{class:t(F)("-mx-1 my-1 h-px bg-muted",r.class)}),null,16,["class"]))}}),at=C({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(p){const r=p,e=y(()=>{const{class:o,...i}=r;return i}),n=R(e);return(o,i)=>(s(),v(t(be),D(t(n),{class:t(F)("px-2 py-1.5 text-sm font-semibold",o.inset&&"pl-8",r.class)}),{default:_(()=>[M(o.$slots,"default")]),_:3},16,["class"]))}});export{ke as R,Be as S,et as _,tt as a,at as b,st as c,ot as d,Qe as e,Ue as f,qe as g};
